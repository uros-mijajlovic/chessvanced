(()=>{"use strict";var t,e,r,n,a={887:(t,e,r)=>{r.d(e,{qQ:()=>M});const n="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",a=["1-0","0-1","1/2-1/2","*"],o={b:[16,32,17,15],w:[-16,-32,-17,-15]},i={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},s=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],c={p:0,n:1,b:2,r:3,q:4,k:5},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},h={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},P={w:[{square:h.a1,flag:l.QSIDE_CASTLE},{square:h.h1,flag:l.KSIDE_CASTLE}],b:[{square:h.a8,flag:l.QSIDE_CASTLE},{square:h.h8,flag:l.KSIDE_CASTLE}]};function d(t){var e=t.charAt(0);if(e>="a"&&e<="h"){if(t.match(/[a-h]\d.*[a-h]\d/))return;return E}return"o"===(e=e.toLowerCase())?B:e}function f(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function u(t){return t>>4}function v(t){return 15&t}function g(t){var e=v(t),r=u(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function m(t){return t===N?R:N}function b(t){var e=t instanceof Array?[]:{};for(var r in t)e[r]="object"==typeof r?b(t[r]):t[r];return e}function y(t){return t.replace(/^\s+|\s+$/g,"")}const R="b",N="w",k=-1,E="p",C="b",B="k",w=(function(){for(var t=[],e=h.a8;e<=h.h1;e++)136&e?e+=7:t.push(g(e))}(),{NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"}),M=function(t){var e=new Array(128),r={w:k,b:k},M=N,O={w:0,b:0},q=k,A=0,Q=1,_=[],K={},F={};function x(t){void 0===t&&(t=!1),e=new Array(128),r={w:k,b:k},M=N,O={w:0,b:0},q=k,A=0,Q=1,_=[],t||(K={}),F={},H(D())}function T(){for(var t=[],e={},r=function(t){t in F&&(e[t]=F[t])};_.length>0;)t.push(nt());for(r(D());t.length>0;)rt(t.pop()),r(D());F=e}function S(){I(n)}function I(t,e){void 0===e&&(e=!1);var r=t.split(/\s+/),n=r[0],a=0;if(!L(t).valid)return!1;x(e);for(var o=0;o<n.length;o++){var i=n.charAt(o);if("/"===i)a+=8;else if(-1!=="0123456789".indexOf(i))a+=parseInt(i,10);else{var s=i<"a"?N:R;j({type:i.toLowerCase(),color:s},g(a)),a++}}return M=r[1],r[2].indexOf("K")>-1&&(O.w|=l.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(O.w|=l.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(O.b|=l.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(O.b|=l.QSIDE_CASTLE),q="-"===r[3]?k:h[r[3]],A=parseInt(r[4],10),Q=parseInt(r[5],10),H(D()),!0}function L(t){var e="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",a="5th field (half move counter) must be a non-negative integer.",o="4th field (en-passant square) is invalid.",i="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",p="1st field (piece positions) does not contain 8 '/'-delimited rows.",c="1st field (piece positions) is invalid [consecutive numbers].",l="1st field (piece positions) is invalid [invalid piece].",h="1st field (piece positions) is invalid [row too large].",P="Illegal en-passant square",d=t.split(/\s+/);if(6!==d.length)return{valid:!1,error_number:1,error:r};if(isNaN(parseInt(d[5]))||parseInt(d[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(parseInt(d[4]))||parseInt(d[4],10)<0)return{valid:!1,error_number:3,error:a};if(!/^(-|[abcdefgh][36])$/.test(d[3]))return{valid:!1,error_number:4,error:o};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(d[2]))return{valid:!1,error_number:5,error:i};if(!/^(w|b)$/.test(d[1]))return{valid:!1,error_number:6,error:s};var f=d[0].split("/");if(8!==f.length)return{valid:!1,error_number:7,error:p};for(var u=0;u<f.length;u++){for(var v=0,g=!1,m=0;m<f[u].length;m++)if(isNaN(f[u][m])){if(!/^[prnbqkPRNBQK]$/.test(f[u][m]))return{valid:!1,error_number:9,error:l};v+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:c};v+=parseInt(f[u][m],10),g=!0}if(8!==v)return{valid:!1,error_number:10,error:h}}return"3"==d[3][1]&&"w"==d[1]||"6"==d[3][1]&&"b"==d[1]?{valid:!1,error_number:11,error:P}:{valid:!0,error_number:0,error:e}}function D(){for(var t=0,r="",n=h.a8;n<=h.h1;n++){if(null==e[n])t++;else{t>0&&(r+=t,t=0);var a=e[n].color,o=e[n].type;r+=a===N?o.toUpperCase():o.toLowerCase()}n+1&136&&(t>0&&(r+=t),n!==h.h1&&(r+="/"),t=0,n+=8)}var i="";O[N]&l.KSIDE_CASTLE&&(i+="K"),O[N]&l.QSIDE_CASTLE&&(i+="Q"),O[R]&l.KSIDE_CASTLE&&(i+="k"),O[R]&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var s=q===k?"-":g(q);return[r,M,i,s,A,Q].join(" ")}function V(t){for(var e=0;e<t.length;e+=2)"string"==typeof t[e]&&"string"==typeof t[e+1]&&(K[t[e]]=t[e+1]);return K}function H(t){_.length>0||(t!==n?(K.SetUp="1",K.FEN=t):(delete K.SetUp,delete K.FEN))}function U(t){var r=e[h[t]];return r?{type:r.type,color:r.color}:null}function j(t,n){if(!("type"in t)||!("color"in t))return!1;if(-1==="pnbrqkPNBRQK".indexOf(t.type.toLowerCase()))return!1;if(!(n in h))return!1;var a=h[n];return(t.type!=B||r[t.color]==k||r[t.color]==a)&&(e[a]={type:t.type,color:t.color},t.type===B&&(r[t.color]=a),H(D()),!0)}function G(t,e,r,n,a){var o={color:M,from:e,to:r,flags:n,piece:t[e].type};return a&&(o.flags|=l.PROMOTION,o.promotion=a),t[r]?o.captured=t[r].type:n&l.EP_CAPTURE&&(o.captured=E),o}function z(t){function n(t,e,r,n,a){if(t[r].type!==E||0!==u(n)&&7!==u(n))e.push(G(t,r,n,a));else for(var o=["q","r",C,"n"],i=0,s=o.length;i<s;i++)e.push(G(t,r,n,a,o[i]))}var a=[],s=M,p=m(s),c={b:1,w:6},P=h.a8,d=h.h1,f=!1,v=void 0===t||!("legal"in t)||t.legal,g=void 0===t||!("piece"in t)||"string"!=typeof t.piece||t.piece.toLowerCase();if(void 0!==t&&"square"in t){if(!(t.square in h))return[];P=d=h[t.square],f=!0}for(var b=P;b<=d;b++)if(136&b)b+=7;else{var y=e[b];if(null!=y&&y.color===s)if(y.type!==E||!0!==g&&g!==E){if(!0===g||g===y.type)for(var R=0,N=i[y.type].length;R<N;R++){var k=i[y.type][R];for(w=b;!(136&(w+=k));){if(null!=e[w]){if(e[w].color===s)break;n(e,a,b,w,l.CAPTURE);break}if(n(e,a,b,w,l.NORMAL),"n"===y.type||"k"===y.type)break}}}else{var w=b+o[s][0];if(null==e[w]){n(e,a,b,w,l.NORMAL);var w=b+o[s][1];c[s]===u(b)&&null==e[w]&&n(e,a,b,w,l.BIG_PAWN)}for(R=2;R<4;R++){136&(w=b+o[s][R])||(null!=e[w]&&e[w].color===p?n(e,a,b,w,l.CAPTURE):w===q&&n(e,a,b,q,l.EP_CAPTURE))}}}if(!(!0!==g&&g!==B||f&&d!==r[s])){if(O[s]&l.KSIDE_CASTLE){var A=(Q=r[s])+2;null!=e[Q+1]||null!=e[A]||$(p,r[s])||$(p,Q+1)||$(p,A)||n(e,a,r[s],A,l.KSIDE_CASTLE)}if(O[s]&l.QSIDE_CASTLE){var Q;A=(Q=r[s])-2;null!=e[Q-1]||null!=e[Q-2]||null!=e[Q-3]||$(p,r[s])||$(p,Q-1)||$(p,A)||n(e,a,r[s],A,l.QSIDE_CASTLE)}}if(!v)return a;var _=[];for(b=0,N=a.length;b<N;b++)rt(a[b]),Y(s)||_.push(a[b]),nt();return _}function W(t,e){var r="";if(t.flags&l.KSIDE_CASTLE)r="O-O";else if(t.flags&l.QSIDE_CASTLE)r="O-O-O";else{if(t.piece!==E){var n=function(t,e){for(var r=t.from,n=t.to,a=t.piece,o=0,i=0,s=0,p=0,c=e.length;p<c;p++){var l=e[p].from,h=e[p].to;a===e[p].piece&&r!==l&&n===h&&(o++,u(r)===u(l)&&i++,v(r)===v(l)&&s++)}return o>0?i>0&&s>0?g(r):s>0?g(r).charAt(1):g(r).charAt(0):""}(t,e);r+=t.piece.toUpperCase()+n}t.flags&(l.CAPTURE|l.EP_CAPTURE)&&(t.piece===E&&(r+=g(t.from)[0]),r+="x"),r+=g(t.to),t.flags&l.PROMOTION&&(r+="="+t.promotion.toUpperCase())}return rt(t),J()&&(Z()?r+="#":r+="+"),nt(),r}function $(t,r){for(var n=h.a8;n<=h.h1;n++)if(136&n)n+=7;else if(null!=e[n]&&e[n].color===t){var a=e[n],o=n-r,i=o+119;if(s[i]&1<<c[a.type]){if(a.type===E){if(o>0){if(a.color===N)return!0}else if(a.color===R)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var l=p[i],P=n+l,d=!1;P!==r;){if(null!=e[P]){d=!0;break}P+=l}if(!d)return!0}}return!1}function Y(t){return $(m(t),r[t])}function J(){return Y(M)}function Z(){return J()&&0===z().length}function X(){return!J()&&0===z().length}function tt(){for(var t={},r=[],n=0,a=0,o=h.a8;o<=h.h1;o++)if(a=(a+1)%2,136&o)o+=7;else{var i=e[o];i&&(t[i.type]=i.type in t?t[i.type]+1:1,i.type===C&&r.push(a),n++)}if(2===n)return!0;if(3===n&&(1===t[C]||1===t.n))return!0;if(n===t[C]+2){var s=0,p=r.length;for(o=0;o<p;o++)s+=r[o];if(0===s||s===p)return!0}return!1}function et(){for(var t=[],e={},r=!1;;){var n=nt();if(!n)break;t.push(n)}for(;;){var a=D().split(" ").slice(0,4).join(" ");if(e[a]=a in e?e[a]+1:1,e[a]>=3&&(r=!0),!t.length)break;rt(t.pop())}return r}function rt(t){var n=M,a=m(n);if(function(t){_.push({move:t,kings:{b:r.b,w:r.w},turn:M,castling:{b:O.b,w:O.w},ep_square:q,half_moves:A,move_number:Q})}(t),e[t.to]=e[t.from],e[t.from]=null,t.flags&l.EP_CAPTURE&&(M===R?e[t.to-16]=null:e[t.to+16]=null),t.flags&l.PROMOTION&&(e[t.to]={type:t.promotion,color:n}),e[t.to].type===B){if(r[e[t.to].color]=t.to,t.flags&l.KSIDE_CASTLE){var o=t.to-1,i=t.to+1;e[o]=e[i],e[i]=null}else if(t.flags&l.QSIDE_CASTLE){o=t.to+1,i=t.to-2;e[o]=e[i],e[i]=null}O[n]=""}if(O[n])for(var s=0,p=P[n].length;s<p;s++)if(t.from===P[n][s].square&&O[n]&P[n][s].flag){O[n]^=P[n][s].flag;break}if(O[a])for(s=0,p=P[a].length;s<p;s++)if(t.to===P[a][s].square&&O[a]&P[a][s].flag){O[a]^=P[a][s].flag;break}q=t.flags&l.BIG_PAWN?"b"===M?t.to-16:t.to+16:k,t.piece===E||t.flags&(l.CAPTURE|l.EP_CAPTURE)?A=0:A++,M===R&&Q++,M=m(M)}function nt(){var t=_.pop();if(null==t)return null;var n=t.move;r=t.kings,M=t.turn,O=t.castling,q=t.ep_square,A=t.half_moves,Q=t.move_number;var a,o,i=M,s=m(M);if(e[n.from]=e[n.to],e[n.from].type=n.piece,e[n.to]=null,n.flags&l.CAPTURE)e[n.to]={type:n.captured,color:s};else if(n.flags&l.EP_CAPTURE){var p;p=i===R?n.to-16:n.to+16,e[p]={type:E,color:s}}n.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(n.flags&l.KSIDE_CASTLE?(a=n.to+1,o=n.to-1):n.flags&l.QSIDE_CASTLE&&(a=n.to-2,o=n.to+1),e[a]=e[o],e[o]=null);return n}function at(t,e){for(var r=f(t),n=0;n<2;n++){if(1==n){if(!e)return null;var a=!1;if(c=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/)){var o=c[1],i=c[2],s=c[3],p=c[4];1==i.length&&(a=!0)}else{var c;if(c=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/)){o=c[1],i=c[2],s=c[3],p=c[4];if(1==i.length)a=!0}}}for(var l=d(r),P=z({legal:!0,piece:o||l}),u=0,v=P.length;u<v;u++)switch(n){case 0:if(r===f(W(P[u],P)))return P[u];break;case 1:if(c){if(!(o&&o.toLowerCase()!=P[u].piece||h[i]!=P[u].from||h[s]!=P[u].to||p&&p.toLowerCase()!=P[u].promotion))return P[u];if(a){var m=g(P[u].from);if(!(o&&o.toLowerCase()!=P[u].piece||h[s]!=P[u].to||i!=m[0]&&i!=m[1]||p&&p.toLowerCase()!=P[u].promotion))return P[u]}}}}return null}function ot(t){var e=b(t);e.san=W(e,z({legal:!0})),e.to=g(e.to),e.from=g(e.from);var r="";for(var n in l)l[n]&e.flags&&(r+=w[n]);return e.flags=r,e}function it(t){for(var e=z({legal:!1}),r=0,n=M,a=0,o=e.length;a<o;a++){if(rt(e[a]),!Y(n))if(t-1>0)r+=it(t-1);else r++;nt()}return r}return I(void 0===t?n:t),{load:function(t){return I(t)},reset:function(){return S()},swapTurn:function(){this.turn==N?this.turn=R:this.turn=N},moves:function(t){for(var e=z(t),r=[],n=0,a=e.length;n<a;n++)void 0!==t&&"verbose"in t&&t.verbose?r.push(ot(e[n])):r.push(W(e[n],z({legal:!0})));return r},in_check:function(){return J()},in_checkmate:function(){return Z()},in_stalemate:function(){return X()},in_draw:function(){return A>=100||X()||tt()||et()},insufficient_material:function(){return tt()},in_threefold_repetition:function(){return et()},game_over:function(){return A>=100||Z()||X()||tt()||et()},validate_fen:function(t){return L(t)},fen:function(){return D()},board:function(){for(var t=[],r=[],n=h.a8;n<=h.h1;n++)null==e[n]?r.push(null):r.push({square:g(n),type:e[n].type,color:e[n].color}),n+1&136&&(t.push(r),r=[],n+=8);return t},pgn:function(t){var e="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\n",r="object"==typeof t&&"number"==typeof t.max_width?t.max_width:0,n=[],a=!1;for(var o in K)n.push("["+o+' "'+K[o]+'"]'+e),a=!0;a&&_.length&&n.push(e);for(var i=function(t){var e=F[D()];void 0!==e&&(t=`${t}${t.length>0?" ":""}{${e}}`);return t},s=[];_.length>0;)s.push(nt());var p=[],c="";for(0===s.length&&p.push(i(""));s.length>0;){c=i(c);var l=s.pop();if(_.length||"b"!==l.color)"w"===l.color&&(c.length&&p.push(c),c=Q+".");else{const t=`${Q}. ...`;c=c?`${c} ${t}`:t}c=c+" "+W(l,z({legal:!0})),rt(l)}if(c.length&&p.push(i(c)),void 0!==K.Result&&p.push(K.Result),0===r)return n.join("")+p.join(" ");var h=function(){return n.length>0&&" "===n[n.length-1]&&(n.pop(),!0)},P=function(t,a){for(var o of a.split(" "))if(o){if(t+o.length>r){for(;h();)t--;n.push(e),t=0}n.push(o),t+=o.length,n.push(" "),t++}return h()&&t--,t},d=0;for(o=0;o<p.length;o++)d+p[o].length>r&&p[o].includes("{")?d=P(d,p[o]):(d+p[o].length>r&&0!==o?(" "===n[n.length-1]&&n.pop(),n.push(e),d=0):0!==o&&(n.push(" "),d++),n.push(p[o]),d+=p[o].length);return n.join("")},load_pgn:function(t,e){var r=void 0!==e&&"sloppy"in e&&e.sloppy;function n(t){return t.replace(/\\/g,"\\")}t=t.trim();var o="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",i=new RegExp("^(\\[((?:"+n(o)+")|.)*\\])(?:\\s*"+n(o)+"){2}"),s=i.test(t)?i.exec(t)[1]:"";S();var p=function(t,e){for(var r="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",a={},o=t.split(new RegExp(n(r))),i="",s="",p=0;p<o.length;p++){var c=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;i=o[p].replace(c,"$1"),s=o[p].replace(c,"$2"),y(i).length>0&&(a[i]=s)}return a}(s,e),c="";for(var l in p)"fen"===l.toLowerCase()&&(c=p[l]),V([l,p[l]]);if(r){if(c&&!I(c,!0))return!1}else if(!("1"!==p.SetUp||"FEN"in p&&I(p.FEN,!0)))return!1;for(var h=function(t){return`{${function(t){return Array.from(t).map((function(t){return t.charCodeAt(0)<128?t.charCodeAt(0).toString(16):encodeURIComponent(t).replace(/\%/g,"").toLowerCase()})).join("")}((t=t.replace(new RegExp(n(o),"g")," ")).slice(1,t.length-1))}}`},P=function(t){if(t.startsWith("{")&&t.endsWith("}"))return function(t){return 0==t.length?"":decodeURIComponent("%"+t.match(/.{1,2}/g).join("%"))}(t.slice(1,t.length-1))},d=t.replace(s,"").replace(new RegExp(`({[^}]*})+?|;([^${n(o)}]*)`,"g"),(function(t,e,r){return void 0!==e?h(e):" "+h(`{${r.slice(1)}}`)})).replace(new RegExp(n(o),"g")," "),f=/(\([^\(\)]+\))+?/g;f.test(d);)d=d.replace(f,"");var u=y(d=(d=(d=d.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));u=u.join(",").replace(/,,+/g,",").split(",");for(var v="",g="",m=0;m<u.length;m++){var b=P(u[m]);if(void 0===b)if(null==(v=at(u[m],r))){if(!(a.indexOf(u[m])>-1))return!1;g=u[m]}else g="",rt(v);else F[D()]=b}return g&&Object.keys(K).length&&!K.Result&&V(["Result",g]),!0},header:function(){return V(arguments)},turn:function(){return M},move:function(t,e){var r=void 0!==e&&"sloppy"in e&&e.sloppy,n=null;if("string"==typeof t)n=at(t,r);else if("object"==typeof t)for(var a=z(),o=0,i=a.length;o<i;o++)if(t.from===g(a[o].from)&&t.to===g(a[o].to)&&(!("promotion"in a[o])||t.promotion===a[o].promotion)){n=a[o];break}if(!n)return null;var s=ot(n);return rt(n),s},undo:function(){var t=nt();return t?ot(t):null},clear:function(){return x()},put:function(t,e){return j(t,e)},get:function(t){return U(t)},ascii(){for(var t="   +------------------------+\n",r=h.a8;r<=h.h1;r++){if(0===v(r)&&(t+=" "+"87654321"[u(r)]+" |"),null==e[r])t+=" . ";else{var n=e[r].type;t+=" "+(e[r].color===N?n.toUpperCase():n.toLowerCase())+" "}r+1&136&&(t+="|\n",r+=8)}return t+="   +------------------------+\n",t+="     a  b  c  d  e  f  g  h"},remove:function(t){return function(t){var n=U(t);return e[h[t]]=null,n&&n.type===B&&(r[n.color]=k),H(D()),n}(t)},perft:function(t){return it(t)},square_color:function(t){if(t in h){var e=h[t];return(u(e)+v(e))%2==0?"light":"dark"}return null},history:function(t){for(var e=[],r=[],n=(void 0!==t&&"verbose"in t&&t.verbose);_.length>0;)e.push(nt());for(;e.length>0;){var a=e.pop();n?r.push(ot(a)):r.push(W(a,z({legal:!0}))),rt(a)}return r},get_comment:function(){return F[D()]},set_comment:function(t){F[D()]=t.replace("{","[").replace("}","]")},delete_comment:function(){var t=F[D()];return delete F[D()],t},get_comments:function(){return T(),Object.keys(F).map((function(t){return{fen:t,comment:F[t]}}))},delete_comments:function(){return T(),Object.keys(F).map((function(t){var e=F[t];return delete F[t],{fen:t,comment:e}}))}}}},949:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{b:()=>c});r(887);var a=r(953),o=r(277),i=r(261),s=r(383),p=t([a]);a=(p.then?(await p)():p)[0];class c{constructor(t){this.stockfishOrchestrator=null,this.gameAnalysis=[],this.guiHandler=t,this.allDataAnalysisArray=[],this.stopped=!1,this.running=!1,this.openingsBase=new s.Q}clearData(){this.gameAnalysis=[],this.allDataAnalysisArray=[]}async loadOpeningsBase(){await this.openingsBase.loadOpenings()}calculateMoveBrilliance(t,e){if(0==e)return"gray";var r="";for(let t=0;t<e;t++)try{r+=this.moveArray[t].san}catch(e){alert("Alou fejl "+this.moveArray[t])}if(this.openingsBase.isBookMove(r))return"book move";const n=e%2,o=this.allDataAnalysisArray[e-1],s=this.allDataAnalysisArray[e],p=(0,a.LJ)(s[0].CPreal),c=(0,a.LJ)(o[0].CPreal),l=(n?0:100)-c*(n?-1:1);if(!(1 in o))return"gray";const h=(s[0].CPreal-o[0].CPreal)*(n?1:-1);if(e>=2){const r=this.allDataAnalysisArray[e-2];if(h>-75&&(Math.abs(s[0].CPreal)<75||1==n&&s[0].CPreal>0||0==n&&s[0].CPreal<0)){var[P,d]=i.HX(r[0].FEN,o[0].FEN,s[0].FEN,t);if(P&&!(l>90&&0==d))return"brilliant"}}const f=Math.abs(Math.abs(o[0].CPreal)-Math.abs(o[1].CPreal)),u=(n?0:100)-(0,a.LJ)(o[0].CPreal)*(n?-1:1)-((n?0:100)-(0,a.LJ)(o[1].CPreal)*(n?-1:1));if(t==o[0].move)return o[0].CPreal,o[1].CPreal,o[0].move,u>15?"great":"best";if(t==o[1].move&&f<100)return"good";const v=(c-p)*(n?-1:1);return v<-20?"blunder":v<-13?"mistake":v<-7?"inaccuracy":"gray"}sendEval(t){if(this.stopped)return;var e=t.positionEvaluation,r=(t.FENstring,t.regularMove),n=t.moveIndex;this.allDataAnalysisArray.push(e);const o=(0,a.k6)(e);o.moveRating=this.calculateMoveBrilliance(r,n),this.gameAnalysis.push(o),this.guiHandler.updateGraph(this.gameAnalysis),this.checkIfAnalysisFinalized(n+1)}checkIfAnalysisFinalized(t){t==this.moveArray.length&&this.guiHandler.getEloEstimator().calculateElo(this.gameAnalysis,this.fromPerspective,this.playerElos)}async stopAnalysis(){if(0!=this.running){for(this.stopped=!0;this.stopped;)await new Promise((t=>setTimeout(t,100)));this.clearData()}}async analyzePgnGame(t,e,r,n=[],i=[],s=[]){this.playerElos=s,await this.stopAnalysis(),this.gameAnalysis=[],this.moveArray=e,i&&(this.allDataAnalysisArray=i);for(let t=0;t<this.allDataAnalysisArray.length;t++){const r=this.allDataAnalysisArray[t];var p={};if(0==t)(p=(0,a.k6)(r)).moveRating="gray";else{const n=e[t-1].fromto,o=t;(p=(0,a.k6)(r)).moveRating=this.calculateMoveBrilliance(n,o)}this.gameAnalysis.push(p)}var c;this.stockfishOrchestrator&&this.stockfishOrchestrator.deleteWorker(),this.stockfishOrchestrator=await(0,o.e)(!1),this.stockfishOrchestrator.analysisOrchestrator=this,this.stockfishOrchestrator.setCallback((t=>{this.sendEval(t)})),this.running=!0,this.fromPerspective=r,this.fenArray=t,c=this.gameAnalysis?this.gameAnalysis.length:0,this.checkIfAnalysisFinalized(c-1),this.guiHandler.updateGraph(this.gameAnalysis);for(let r=c;r<t.length;r++){const n=t[r];if(this.stopped)break;0==r?await this.stockfishOrchestrator.waitForRun(n,"",r):await this.stockfishOrchestrator.waitForRun(n,e[r-1].fromto,r)}this.stopped=!1,this.running=!1}}n()}catch(t){n(t)}}))},766:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>p});var a=r(953),o=r(475),i=r(887),s=t([a]);a=(s.then?(await s)():s)[0];class p{constructor(){this.chessObject=(0,i.qQ)(),this.activeTiles=[],this.chessBoard=Chessboard2("chessground",a.W3)}clearArrows(){this.chessBoard.clearArrows()}addBestMoveArrow(t){this.chessBoard.clearArrows();const e=t.substring(0,2),r=t.substring(2,4);this.addArrowToBoard(e,r)}addArrowToBoard(t,e){const r=t+"-"+e;this.chessBoard.addArrow(r,"small")}setPosition(t,e){this.chessObject.load(t),this.chessBoard.position(t,e)}getPieceAtSquare(t){return this.chessObject.get(t)}getChessboard(){return this.chessBoard}flipBoard(){this.chessBoard.flip(),this.flipPromotionPopup(document.getElementById("promotion_bar"))}createButton(t,e,r,n,a){const i=document.createElement("div");i.classList.add("promotion-figure-button");const s=document.createElement("img");return s.src="/img/chesspieces/wikipedia/"+a+o.D.PROMOTION_TO_CHAR[t].toUpperCase()+".png",s.id=`button-${t}`,s.addEventListener("click",(a=>this.promotionChosenCallback(a,e,r,n,t))),i.appendChild(s),i}promotionChosenCallback(t,e,r,n,a){const i=document.getElementById("promotion_bar");for(i.style.visibility="hidden";i.firstChild;)i.removeChild(i.firstChild);e(r,n,o.D.PROMOTION_TO_CHAR[a])}movePromotionPopup(t,e,r){const n=100*(0,a.dF)(e),o="w"==r?0:100;"white"==this.chessBoard.orientation()?t.style.transform=`translate(${n}%, ${o}%)`:t.style.transform=`translate(${700-n}%, ${100-o}%)`}flipPromotionPopup(t){const e=t.style.transform,r=/translate\((\d+)%, (\d+)%\)/.exec(e);if(r){const e=parseInt(r[1]),n=parseInt(r[2]);t.style.transform=`translate(${700-e}%, ${100-n}%)`}}createPromotionPopup(t,e,r,n){const a=document.getElementById("promotion_bar");this.movePromotionPopup(a,r,n),a.style.visibility="visible";for(let o=0;o<=3;o++){const i=this.createButton(o,t,e,r,n);a.appendChild(i)}}colorTile(t,e,r="yellow_tile"){var n=document.getElementById("chessground");const a=8-parseInt(t[1]),i=t[0].charCodeAt(0)-"a".charCodeAt(0);if(a>=0&&a<8&&i>=0&&i<8){var s=n.firstElementChild.firstElementChild.children[1].children[a].children[i];if(e==o.D.TILE_COLORS.ACTIVE){const e=s.classList[s.classList.length-1];"active"!=e&&(this.activeTiles.push(t),"inactive"==e?(s.classList.remove(e),s.classList.add(r)):s.classList.add(r))}else e==o.D.TILE_COLORS.INACTIVE&&(s.classList.remove(s.classList[s.classList.length-1]),s.classList.add("kurac"))}}deactivateTiles(){for(;this.activeTiles.length>0;)this.colorTile(this.activeTiles[this.activeTiles.length-1],o.D.TILE_COLORS.INACTIVE),this.activeTiles.pop()}}n()}catch(t){n(t)}}))},758:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Q:()=>i});var a=r(953),o=t([a]);a=(o.then?(await o)():o)[0];class i{writeAccuracies(t,e,r){document.getElementById("elo-estimator-white").textContent=t.toString(),document.getElementById("elo-estimator-black").textContent=e.toString();var n=document.getElementsByClassName("elo-or-accuracy-text");if(r)for(const t of n)t.textContent="ELO";else for(const t of n)t.textContent="Accuracy"}calculateElo(t,e,r){{var n=(0,a.DZ)(t);const e=this.getTotalAccuracy(n,"black").toFixed(1),r=this.getTotalAccuracy(n,"white").toFixed(1);this.writeAccuracies(r,e,!1)}}standardDeviation(t){const e=t.length;if(e<=1)return 0;const r=t.reduce(((t,e)=>t+e),0)/e,n=t.reduce(((t,e)=>t+(e-r)**2),0)/e;return Math.sqrt(n)}getWinPercentagesFromCps(t){var e=[];for(const r of t)e.push((0,a.LJ)(r));return e}getWeighedAccuraciesForCps(t){const e=this.getWinPercentagesFromCps(t),r=Math.max(0,Math.min(8,Math.floor(t.length/10))),n=[];for(let t=0;t<e.length-r+1;t++)n.push(e.slice(t,t+r));const o=e.length-r;for(let t=0;t<r-1;t++)n.push(e.slice(o+t,o+r-1));const i=n.map((t=>Math.max(Math.min(this.standardDeviation(t),12),.5)));var s=[];for(let t=0;t<e.length-1;t++){var p=e[t],c=e[t+1],l=i[t],h=t%2==0,P=(0,a.hJ)(p,c,h);s.push([[P,l],h])}return s}weighted_mean(t){if(!t||0===t.length)return 0;var e=0;for(const r of t)e+=r[0]*r[1];var r=0;for(const e of t)r+=e[1];if(0===r)return 0;return e/r}getTotalAccuracy(t,e){const r="white"==e,n=this.getWeighedAccuraciesForCps(t),a=[];for(let t=0;t<n.length;t++)n[t][1]===r&&a.push(n[t][0]);return this.weighted_mean(a)}}n()}catch(t){n(t)}}))},868:(t,e,r)=>{r.d(e,{Q:()=>c});var n=0;const a={id:"verticalLinePlugin",afterEvent:function(t,e){if("click"==e.event.type){const{ctx:e,tooltip:r,chartArea:{top:a,right:o,bottom:i,left:s,width:p,height:c},scales:{x:l,y:h}}=t;n=r.dataPoints[0].dataIndex}},afterDatasetsDraw(t,e,r){const{ctx:a,tooltip:o,chartArea:{top:i,right:s,bottom:p,left:c,width:l,height:h},scales:{x:P,y:d}}=t,f=P.getPixelForValue(n);a.restore(),a.strokeStyle="rgba(170, 252, 255, 0.8)",a.strokeRect(f,i,0,h),a.save()}},o={id:"hoverLinePlugin",beforeDatasetsDraw(t,e,r){const{ctx:n,tooltip:a,chartArea:{top:o,right:i,bottom:s,left:p,width:c,height:l},scales:{x:h,y:P}}=t;if(a._active.length>0){const t=h.getPixelForValue(a.dataPoints[0].dataIndex);n.save(),n.strokeStyle="gray",n.strokeRect(t,o,0,l)}}};var i=r(475),s={lineAtIndex:[2,4,8],labels:[],datasets:[{label:"Data",data:[],lineTension:0,fill:{above:"rgba(255, 255, 255, 0.8)",below:"rgba(0, 0, 0, 0.8)",target:{value:0}},borderWidth:0,pointHitRadius:50,usePointStyle:!0,pointStyle:"circle",pointRadius:[],hoverRadius:5,hoverBorderWidth:0,borderColor:"rgba(170, 252, 255, 0.8)"}]},p=[];class c{constructor(t){this.chartData=s,this.canvasId=t,this.gameAnalysis=null;const e=document.getElementById(t);this.graph=new Chart(e,{type:"line",data:this.chartData,plugins:[a,o],options:{pointBackgroundColor:t=>{const e=t.dataIndex;try{return i.D.Colors[this.gameAnalysis[e].moveRating]}catch(t){return"gray"}},plugins:{legend:{display:!1},verticalLinePlugin:{lineColor:"cyan",xPosition:3},tooltip:{bodySpacing:0,displayColors:!1,callbacks:{title:function(t,e){return""},body:function(t){return"k"},label:function(t){return p[t.dataIndex].CP.toString()}}}},responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{min:-50,max:50,ticks:{display:!1}},x:{ticks:{display:!1}}},onClick:t=>{const e=Chart.helpers.getRelativePosition(t,this.graph),r=this.graph.scales.x.getValueForPixel(e.x);this.graph.scales.y.getValueForPixel(e.y);this.playerControllerInst.gotoMove(r)}}})}clearData(){this.gameAnalysis=[],p=[];this.chartData.labels=[],this.chartData.datasets[0].data=[],this.chartData.datasets[0].pointRadius=[];this.graph.update()}updateGraph(t){this.gameAnalysis=t,p=t;var e=this.chartData.labels=[],r=this.chartData.datasets[0].data=[],n=this.chartData.datasets[0].pointRadius=[];for(const t of this.gameAnalysis)e.push(t.CP.toString()),r.push(t.evaluation),n.push(i.D.pointSizes[t.moveRating]);this.graph.update()}updateGraphSelectedMove(t){!function(t){n=t}(t),this.graph.update()}}},328:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{C:()=>c});var a=r(232),o=r(475),i=r(766),s=r(758),p=t([i,s]);[i,s]=p.then?(await p)():p;class c{constructor(t,e){this.soundHandler=new a.F,this.evaluationGraph=t,this.chessboardHandler=new i.Z,this.eloEstimator=new s.Q,this.sidebar=e,this.boardOrientation="white",this.boardSetup()}getEloEstimator(){return this.eloEstimator}boardSetup(){var t=document.getElementsByClassName("squares-2dea6")[0],e=8;for(const r of t.children){const t=r.firstChild;(a=document.createElement("span")).textContent=e.toString(),t.appendChild(a),e-=1}e=8;for(const r of t.children){const t=r.children[7];(a=document.createElement("span")).textContent=e.toString(),t.appendChild(a),e-=1}var r=t.children[0];e=0;for(const t of r.children){var n=document.createElement("span");(a=document.createElement("span")).textContent=String.fromCharCode(97+e),7!=e&&0!=e&&t.appendChild(n),t.appendChild(a),e+=1}r=t.children[7];e=0;for(const t of r.children){var a;n=document.createElement("span");(a=document.createElement("span")).textContent=String.fromCharCode(97+e),7!=e&&0!=e&&t.appendChild(n),t.appendChild(a),e+=1}}getSidebar(){return this.sidebar}getGameAnalysis(){return this.gameAnalysis}setBoardOrientation(t){this.boardOrientation!=t&&this.flipBoard()}clearData(){this.gameAnalysis=[],this.evaluationGraph.clearData()}showImportPopup(){document.getElementById("import_popup").style.visibility="visible"}hideImportPopup(){document.getElementById("import_popup").style.visibility="hidden"}clearArrows(){this.chessboardHandler.clearArrows()}addBestMoveArrow(t){this.chessboardHandler.addBestMoveArrow(t)}addArrowToBoard(t,e){this.chessboardHandler.addArrowToBoard(t,e)}getChessboard(){return this.chessboardHandler.getChessboard()}flipBoard(){"white"==this.boardOrientation?this.boardOrientation="black":this.boardOrientation="white",this.flipGlyphs(),this.sidebar.setCounterOrientation(this.boardOrientation),this.chessboardHandler.flipBoard()}createPromotionPopup(t,e,r,n){this.chessboardHandler.createPromotionPopup(t,e,r,n)}colorTile(t,e,r="yellow_tile"){this.chessboardHandler.colorTile(t,e,r)}deactivateTiles(){this.chessboardHandler.deactivateTiles()}colorTilesForMove(t,e,r){if(this.deactivateTiles(),""!=t&&""!=e){this.gameAnalysis;var n;n=this.gameAnalysis[r]?this.gameAnalysis[r].moveRating:"gray";const a=o.D.CssDictForTiles[n];this.colorTile(t,o.D.TILE_COLORS.ACTIVE,a),this.colorTile(e,o.D.TILE_COLORS.ACTIVE,a)}}createGlyph(t,e,r){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","-20 -20 200 200"),n.style.position="absolute",n.style.width="15.5%",n.style.height="15.5%";const a=o.D.glyphToSvg[r];return n.innerHTML=a,"black"==this.boardOrientation?(n.style.left=12.5*(7-e)+"%",n.style.bottom=12.5*(7-t)+"%"):(n.style.left=12.5*e+"%",n.style.bottom=12.5*t+"%"),n}flipGlyphs(){document.getElementsByClassName("squares-2dea6")[0].querySelectorAll("svg").forEach((t=>{const e=t.style.left||"0%",r=t.style.bottom||"0%",n=Math.abs(87.5-parseFloat(e)),a=Math.abs(87.5-parseFloat(r));t.style.left=`${n}%`,t.style.bottom=`${a}%`}))}addGlyphForMove(t,e){this.deactivateGlyphs();const r=this.gameAnalysis[e].moveRating;if(o.D.glyphToSvg.hasOwnProperty(r)){const e=parseInt(t[1])-1,n=t[0].charCodeAt(0)-"a".charCodeAt(0),a=this.createGlyph(e,n,r);document.getElementsByClassName("squares-2dea6")[0].appendChild(a)}}deactivateGlyphs(){const t=document.getElementsByClassName("squares-2dea6")[0].querySelectorAll("svg");for(const e of t)e.remove()}async setBoardAndMove(t,e,r,n,a=o.D.MOVE_TYPE.MOVE_NONE,i=!1){this.soundHandler.playSound(a),this.evaluationGraph.updateGraphSelectedMove(n),this.chessboardHandler.setPosition(t,!1),i?(this.deactivateGlyphs(),this.deactivateTiles(),this.colorTile(e,o.D.TILE_COLORS.ACTIVE,"yellow_tile"),this.colorTile(r,o.D.TILE_COLORS.ACTIVE,"yellow_tile")):(this.colorTilesForMove(e,r,n),this.addGlyphForMove(r,n))}updateGraph(t){this.sidebar.clearMoveCounter();var e=0;for(const r of t)this.addMoveAnalysis(r,e%2==0?"black":"white"),e++;this.gameAnalysis=t,this.evaluationGraph.updateGraph(t),this.sidebar.updateWithNewAnalysis(t)}addMoveAnalysis(t,e){this.sidebar.addSpecialMove(t.moveRating,e)}updateSidebar(t){this.sidebar.setAnalysisData(t)}}n()}catch(t){n(t)}}))},510:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{n:()=>i});var a=r(953),o=t([a]);a=(o.then?(await o)():o)[0];class i{constructor(t,e,r){this.stockfishOrchestrator=t,this.guiHandler=e,this.stockfishOrchestrator.setCallback((t=>{this.evaluationGetCallback(t)})),this.div=r,this.enabled=!1,this.lastFen="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";document.getElementById("toggleSwitch").addEventListener("change",this.toggleSwitched.bind(this))}disableAllLines(){var t=this.div.children;for(let e=0;e<t.length;e++){t[e].style.display="none"}}toggleSwitched(){this.enabled=!this.enabled,this.enabled?this.evaulateNewBoard(this.lastFen):(this.disableAllLines(),this.guiHandler.clearArrows())}evaluationGetCallback(t){var e=t.positionEvaluation;if(this.enabled&&this.lastFen){var r=this.div.children;let t=0;const o=e[0].move;for(this.guiHandler.addBestMoveArrow(o);t in e;){var n=r[t];"none"===window.getComputedStyle(n).display&&(n.style.display="flex");const o=(0,a.wV)(e[t].allMoves,e[t].FEN);if(n.querySelector(".liveBestMove").textContent=o.slice(0,8).join(", "),"cp"==e[t].cpOrMate){const r=parseFloat(e[t].CP)/100>0;n.querySelector(".liveEvaluation").textContent=(r?"+":"")+(parseFloat(e[t].CP)/100).toString()}else n.querySelector(".liveEvaluation").textContent="M"+e[t].CP;t++}}}evaulateNewBoard(t){this.lastFen=t,this.enabled&&""!=t&&((0,a.qF)(t)?(this.lastFen="",this.disableAllLines(),this.guiHandler.clearArrows()):this.stockfishOrchestrator.stopAndStartNewAnalysis(t))}}n()}catch(t){n(t)}}))},383:(t,e,r)=>{r.d(e,{Q:()=>n});class n{constructor(){this.isLoaded=!1,this.isFailed=!1}async loadOpenings(){try{this.openingsDict=await this.loadJsonFromFile("/assets/openings_final.json"),this.isLoaded=!0}catch(t){this.isFailed=!0}}async loadJsonFromFile(t){try{const e=await fetch(t);return await e.json()}catch(e){throw new Error(`Error loading JSON from ${t}: ${e.message}`)}}binarySearch(t){let e=0,r=this.openingsDict.length-1;for(;e<=r;){const n=Math.floor((e+r)/2),a=this.openingsDict[n].g;if(a.startsWith(t))return n;a<t?e=n+1:r=n-1}return-1}isBookMove(t){return!!this.isLoaded&&-1!=this.binarySearch(t)}}},214:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Z:()=>l});var a=r(261),o=r(887),i=r(475),s=r(953),p=r(117),c=t([s]);s=(c.then?(await c)():c)[0];class l{constructor(t,e,r){this.liveBoardEvaluation=r,this.currentPgn=null,this.analysisOrchestrator=e,this.guiHandler=t,this.currentMove=0,this.mainChessObject=(0,o.qQ)(),this.alternativeChessObject=(0,o.qQ)(),this.alternativeStackLeft=[],this.alternativeStackRight=[],this.inAlternativePath=!1,this.liveBoardEvaluation=r,this.analysisData=[],this.analyzedFens=[],this.ready=!1,this.bindNavigation()}bindNavigation(){var t=this;document.getElementById("btn-forward").addEventListener("click",(()=>t.goForwards())),document.getElementById("btn-backward").addEventListener("click",(()=>t.goBackwards())),document.getElementById("btn-backward"),document.addEventListener("keydown",(function(e){37===e.keyCode?t.goBackwards():39===e.keyCode&&t.goForwards()}))}getMoveType(t){return"c"==t?i.D.MOVE_TYPE.MOVE_CAPTURE:i.D.MOVE_TYPE.MOVE_REGULAR}gotoMoveOfType(t,e){const r=this.currentMove+(this.currentMove%2==0&&t||this.currentMove%2==1&&!t?1:0);var n=r;for(n+2>=this.currentMoveArray.length?n=1+(t?0:1):n+=2,this.guiHandler.getGameAnalysis();n!=r&&n!=r+1;){if(this.guiHandler.getGameAnalysis()[n].moveRating==e)return void this.gotoMove(n);n+2>=this.currentMoveArray.length?n=1+(t?0:1):n+=2}}moveArrayToPgn(t){var e=(0,o.qQ)();for(const r of t)e.move(r.san);return e.pgn()}validateData(t){return p.i.isTwoNumberArray(t.playerElos)||(t.playerElos=[-1,-1]),t}setGameFromExtension(t,e,r,n,a,o={}){if(o=this.validateData(o),this.ready){this.currentFenArray=t,this.currentMoveArray=e,this.analysisData=r,this.analyzedFens=n,this.playerSide=a,this.playerElos=o.playerElos;const i=this.moveArrayToPgn(e);return this.guiHandler.setBoardOrientation(a),this.guiHandler.updateSidebar(i),this.startAnalysis(),!0}return!1}setPgn(t){this.analysisData=[],this.analyzedFens=[],this.playerElos=[-1,-1],this.currentPgn=t,this.currentFenArray=(0,a.FB)(this.currentPgn),this.currentMoveArray=(0,a.QZ)(this.currentPgn),this.guiHandler.updateSidebar(t),this.gotoMove(0),this.guiHandler.clearData(),this.startAnalysis()}getChessObject(){return this.inAlternativePath?this.alternativeChessObject:this.mainChessObject}getAlternativeChessObject(){return this.alternativeChessObject}getInAlternative(){return this.inAlternativePath}startAnalysis(){this.analysisOrchestrator.analyzePgnGame(this.currentFenArray,this.currentMoveArray,this.playerSide,this.analysisData,this.analyzedFens,this.playerElos)}updateBoardGUI(t,e,r,n,a,o=!1){this.guiHandler.setBoardAndMove(t,e,r,n,a,o),this.liveBoardEvaluation.evaulateNewBoard(t)}makeAlternativeMove(t,e){const r=t.substring(0,2),n=t.substring(2,4),a=this.alternativeChessObject.move({from:r,to:n,promotion:e});if(this.alternativeChessObject.fen(),!a)return"snapback";{const a=this.alternativeChessObject.fen();this.inAlternativePath=!0,this.updateBoardGUI(a,r,n,this.currentMove,i.D.MOVE_TYPE.MOVE_REGULAR,!0),this.alternativeStackLeft.push([t,e])}}makePossibleAlternativeMove(t,e){var r;return this.guiHandler.getChessboard().clearCircles(),this.currentMove>=this.currentMoveArray.length?this.inAlternativePath=!0:r=this.currentMoveArray[this.currentMove].from+this.currentMoveArray[this.currentMove].to,1==this.inAlternativePath||t!=r?this.makeAlternativeMove(t,e):void this.gotoMove(this.currentMove+1)}goBackwards(){if(this.inAlternativePath){const t=this.alternativeStackLeft.pop();this.alternativeStackRight.push(t);const e=t[0].substring(0,2),r=t[0].substring(2,4);this.alternativeChessObject.undo(),this.guiHandler.setBoardAndMove(this.alternativeChessObject.fen(),e,r,this.currentMove,i.D.MOVE_TYPE.MOVE_REGULAR,!1),this.alternativeChessObject.fen()==this.mainChessObject.fen()&&(this.inAlternativePath=!1)}else this.gotoMove(this.currentMove-1)}goForwards(){if(this.inAlternativePath){if(this.alternativeStackRight.length>0){const t=this.alternativeStackRight.pop();this.makePossibleAlternativeMove(t[0],t[1])}}else this.gotoMove(this.currentMove+1)}gotoMove(t){if(this.inAlternativePath=!1,t=(0,s.mY)(t,0,this.currentMoveArray.length),this.currentMove=t,this.mainChessObject.load(this.currentFenArray[t]),this.alternativeChessObject.load(this.currentFenArray[t]),t>0){this.currentFenArray[t];const e=this.currentMoveArray[t-1].flags,r=this.getMoveType(e);this.updateBoardGUI(this.currentFenArray[t],this.currentMoveArray[t-1].fromto.substring(0,2),this.currentMoveArray[t-1].fromto.substring(2,4),t,r)}else this.updateBoardGUI(this.currentFenArray[t],"","",t,i.D.MOVE_TYPE.MOVE_REGULAR)}}n()}catch(t){n(t)}}))},924:(t,e,r)=>{r.d(e,{Y:()=>o});var n=r(887),a=r(475);class o{constructor(t){this.gameAnalysis=[],this.div=t,this.playerSide="white",document.getElementById("flipBoardButton").addEventListener("click",(()=>{this.guiHandler.flipBoard()})),document.getElementById("loadpgnButton").addEventListener("click",(()=>{this.guiHandler.showImportPopup()})),document.getElementById("import-button").addEventListener("click",(()=>{this.importFromText()})),document.getElementById("close-import-button").addEventListener("click",(()=>{this.guiHandler.hideImportPopup()}));const e=document.getElementById("moveOverviewDiv");a.D.MOVE_NAMES.forEach((t=>{var r=document.createElement("div");r.className="moveOverview "+a.D.MOVE_TO_ID_NAME[t];var n=document.createElement("span");n.textContent="0",n.id="white-"+a.D.MOVE_TO_ID_NAME[t],n.addEventListener("click",(t=>this.gotoSpecialMove(t)));var o=document.createElement("div");o.textContent=t;var i=document.createElement("span");i.textContent="0",i.id="black-"+a.D.MOVE_TO_ID_NAME[t],i.addEventListener("click",(t=>this.gotoSpecialMove(t))),r.append(n),r.append(o),r.append(i),e.append(r)}))}updateWithNewAnalysis(t){this.gameAnalysis=t;var e=0;const r=document.getElementsByClassName("move-notation");for(const t of this.gameAnalysis){if(0!=e){const n=t.moveRating;if(a.D.glyphToSvg.hasOwnProperty(n)&&null===r[e-1].querySelector("svg")){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 300 100"),t.style.height="75%",t.style.overflow="hidden",t.style.paddingLeft="5px",t.style.pointerEvents="none",t.innerHTML=a.D.glyphToSvgSidebar[n],r[e-1].appendChild(t)}}e++}}setCounterOrientation(t){if(this.playerSide!=t){this.playerSide=t;const e=document.getElementById("chartContainer");"reversed"==e.className?e.className="":e.className="reversed"}}gotoSpecialMove(t){const e=t.target.id;this.playerController.gotoMoveOfType("white"==e.substring(0,5),a.D.ID_NAME_TO_MOVE_RATING[e.slice(6)]),t.target.id}addSpecialMove(t,e){const r=a.D.MOVE_RATING_TO_ID_NAME[t],n=document.getElementById(e+"-"+r);n&&(n.textContent=(parseInt(n.textContent)+1).toString())}clearMoveCounter(){document.getElementById("moveOverviewDiv").querySelectorAll("span").forEach((t=>{t.textContent="0"}))}importFromText(){const t=document.getElementById("pgn_textarea").value;this.guiHandler.hideImportPopup(),this.playerController.setPgn(t)}setAnalysisData(t){const e=t=>{this.playerController.gotoMove(parseInt(t.target.id)+1)},r=(t,r,n)=>{const a=document.createElement("div");a.id=`${t+1}`,a.textContent=""+(t+1)/2,a.className="move-element";const o=document.createElement("div");if(o.className="move-notation clickable",o.textContent=r,o.id=""+(t-1),o.addEventListener("click",e),a.appendChild(o),""!=n){const r=document.createElement("div");r.className="move-notation clickable",r.textContent=n,r.id=`${t}`,r.addEventListener("click",e),a.appendChild(r)}return a};for(;this.div.firstChild;)this.div.removeChild(this.div.firstChild);const a=function(t){const e=(0,n.qQ)();e.load_pgn(t);const r=e.history();var a=[];return r.forEach(((t,e)=>{a.push(t)})),a}(t);var o=[];if(a.forEach(((t,e)=>{if(o.push(t),2==o.length){const t=r(e,o[0],o[1]);this.div.appendChild(t),o=[]}})),1==o.length){const t=r(a.length,o[0],"");this.div.appendChild(t)}}}},232:(t,e,r)=>{r.d(e,{F:()=>o});var n=r(475);async function a(t){const e=await fetch(t);return await e.blob()}class o{constructor(){this.audioArray=Array(5).fill(void 0),a("/assets/audio/standard/Move.mp3").then((t=>{this.audioArray[n.D.MOVE_TYPE.MOVE_REGULAR]=URL.createObjectURL(t)})),a("/assets/audio/standard/Capture.mp3").then((t=>{this.audioArray[n.D.MOVE_TYPE.MOVE_CAPTURE]=URL.createObjectURL(t)})),a("/assets/audio/standard/Check.mp3").then((t=>{this.audioArray[n.D.MOVE_TYPE.MOVE_CHECK]=URL.createObjectURL(t)})),a("/assets/audio/standard/Victory.mp3").then((t=>{this.audioArray[n.D.MOVE_TYPE.MOVE_MATE]=URL.createObjectURL(t)})),a("/assets/audio/standard/THEROOK.mp3").then((t=>{this.audioArray[n.D.MOVE_TYPE.LEVY_THEROOK]=URL.createObjectURL(t)}))}enableSound(){this.enabled=!0}disableSound(){this.enabled=!1}playSound(t){if(t!=n.D.MOVE_TYPE.MOVE_NONE){let e=new Audio(this.audioArray[t]);e.volume=.5,e.play()}}}},475:(t,e,r)=>{var n;r.d(e,{D:()=>n}),function(t){let e,r,n,a;t.STOCKFISH_MOVETIME=1e3,function(t){t[t.MOVE_REGULAR=0]="MOVE_REGULAR",t[t.MOVE_CAPTURE=1]="MOVE_CAPTURE",t[t.MOVE_CHECK=2]="MOVE_CHECK",t[t.MOVE_MATE=3]="MOVE_MATE",t[t.LEVY_THEROOK=4]="LEVY_THEROOK",t[t.MOVE_NONE=5]="MOVE_NONE"}(e=t.MOVE_TYPE||(t.MOVE_TYPE={})),function(t){t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE"}(r=t.TILE_COLORS||(t.TILE_COLORS={})),function(t){t[t.WHITE=0]="WHITE",t[t.BLACK=1]="BLACK",t[t.BOTH=2]="BOTH"}(n=t.ANALYSIS_FOR||(t.ANALYSIS_FOR={})),t.MOVE_NAMES=["Brilliant","Great Move","Best Move","Mistake","Blunder","Book Move"],t.MOVE_TO_ID_NAME={Brilliant:"brilliant-color","Great Move":"great-color","Best Move":"best-color",Mistake:"mistake-color",Blunder:"blunder-color","Book Move":"book-color"},t.ID_NAME_TO_MOVE_RATING={"brilliant-color":"brilliant","great-color":"great","best-color":"best","mistake-color":"mistake","blunder-color":"blunder","book-color":"book move"},t.MOVE_RATING_TO_ID_NAME={brilliant:"brilliant-color",great:"great-color",best:"best-color",mistake:"mistake-color",blunder:"blunder-color","book move":"book-color"},t.Colors={brilliant:"rgba(15, 255, 243, 1)",great:"rgba(107, 111, 229, 1)",best:"gray",good:"gray",gray:"gray",inaccuracy:"gray",mistake:"yellow",blunder:"red","book move":"rgba(234, 193, 170, 1)"},t.CssDictForTiles={brilliant:"brilliant_tile",great:"great_tile",best:"yellow_tile",good:"yellow_tile",gray:"yellow_tile",inaccuracy:"yellow_tile",mistake:"mistake_tile",blunder:"mistake_tile","book move":"brown_tile"},t.pointSizes={brilliant:3,great:3,best:1,good:1,gray:1,mistake:1,inaccuracy:1,blunder:1,"book move":0},function(t){t[t.QUEEN=0]="QUEEN",t[t.ROOK=1]="ROOK",t[t.BISHOP=2]="BISHOP",t[t.KNIGHT=3]="KNIGHT"}(a=t.PROMOTION||(t.PROMOTION={})),t.PROMOTION_TO_CHAR={0:"q",1:"r",2:"n",3:"b"},t.PROMOTION_CHAR_TO_IMAGE_URL={q:"/img/chesspieces/wikipedia/bQ.png",r:"/img/chesspieces/wikipedia/bR.png",n:"/img/chesspieces/wikipedia/bN.png",b:"/img/chesspieces/wikipedia/bB.png"},t.glyphToSvgSidebar={"book move":'\n    <style type="text/css">\n    .st0{opacity:0.3;enable-background:new    ;}\n    .st1{fill:#A5815E;}\n    .st2{fill:#FFFFFF;}\n  </style>\n  <g id="book">\n    <path class="st0" d="M50.4,2.7C23,2.7,0.8,25,0.8,52.4S23,102,50.4,102S100,79.7,100,52.4S77.8,2.7,50.4,2.7z"/>\n    <path class="st1" d="M50.4,0C23,0,0.8,22.2,0.8,49.6S23,99.2,50.4,99.2S99.9,77,99.9,49.6S77.8,0,50.4,0z"/>\n    <g>\n      <path class="st0" d="M47.3,33.6c-5.5-4.2-13.8-6-26.6-6h-5.9v48h5.9c9.3-0.7,18.6,1.5,26.6,6.5V33.6z"/>\n      <path class="st0" d="M53.3,82c8-4.9,17.3-7.1,26.6-6.5h5.9v-48H80c-12.7,0-21,1.9-26.6,6V82z"/>\n      <path class="st2" d="M47.3,29.8c-5.5-4.2-13.8-6-26.6-6h-3.4v47.9h3.2c9.3-0.7,18.6,1.5,26.6,6.5L47.3,29.8z"/>\n      <path class="st2" d="M53.3,78.2c8-4.9,17.3-7.2,26.6-6.6h3.4V23.8h-3.2c-12.7,0-21,1.9-26.6,6L53.3,78.2z"/>\n    </g>\n  </g>\n        ',inaccuracy:'\n      <g transform="translate(0 0) scale(1)">\n        <circle style="fill:#56b4e9" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.81934" d="m 37.734375,21.947266 c -3.714341,0 -7.128696,0.463992 -10.242187,1.392578 -3.113493,0.928585 -6.009037,2.130656 -8.685547,3.605468 l 4.34375,8.765626 c 2.348774,-1.201699 4.643283,-2.157093 6.882812,-2.867188 2.239529,-0.710095 4.504676,-1.064453 6.798828,-1.064453 2.294152,0 4.069851,0.463993 5.326172,1.392578 1.310944,0.873963 1.966797,2.185668 1.966797,3.933594 0,1.747925 -0.546219,3.276946 -1.638672,4.58789 -1.037831,1.256322 -2.786121,2.757934 -5.24414,4.50586 -2.785757,2.021038 -4.751362,3.961188 -5.898438,5.818359 -1.147076,1.857171 -1.720703,4.149726 -1.720703,6.88086 v 2.951171 h 10.568359 v -2.376953 c 0,-1.147076 0.137043,-2.10247 0.410156,-2.867187 0.327737,-0.764718 0.928772,-1.557613 1.802735,-2.376953 0.873963,-0.81934 2.103443,-1.802143 3.6875,-2.949219 2.130284,-1.584057 3.905982,-3.058262 5.326172,-4.423828 1.420189,-1.42019 2.485218,-2.951164 3.195312,-4.589844 0.710095,-1.63868 1.064453,-3.576877 1.064453,-5.816406 0,-4.205946 -1.583838,-7.675117 -4.751953,-10.40625 -3.113492,-2.731134 -7.510649,-4.095703 -13.191406,-4.095703 z m 24.744141,0.818359 2.048828,39.083984 h 9.75 L 76.324219,22.765625 Z M 35.357422,68.730469 c -1.966416,0 -3.63248,0.51881 -4.998047,1.55664 -1.365567,0.983208 -2.046875,2.731498 -2.046875,5.244141 0,2.403397 0.681308,4.151687 2.046875,5.244141 1.365567,1.03783 3.031631,1.55664 4.998047,1.55664 1.911793,0 3.550449,-0.51881 4.916016,-1.55664 1.365566,-1.092454 2.048828,-2.840744 2.048828,-5.244141 0,-2.512643 -0.683262,-4.260933 -2.048828,-5.244141 -1.365567,-1.03783 -3.004223,-1.55664 -4.916016,-1.55664 z m 34.003906,0 c -1.966416,0 -3.63248,0.51881 -4.998047,1.55664 -1.365566,0.983208 -2.048828,2.731498 -2.048828,5.244141 0,2.403397 0.683262,4.151687 2.048828,5.244141 1.365567,1.03783 3.031631,1.55664 4.998047,1.55664 1.911793,0 3.550449,-0.51881 4.916016,-1.55664 1.365566,-1.092454 2.046875,-2.840744 2.046875,-5.244141 0,-2.512643 -0.681309,-4.260933 -2.046875,-5.244141 -1.365567,-1.03783 -3.004223,-1.55664 -4.916016,-1.55664 z" />\n      </g>\n      ',mistake:'\n        <g transform="translate(0 0) scale(1)">\n        <circle style="fill:#e69f00" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.932208" d="m 40.435856,60.851495 q 0,-4.661041 1.957637,-7.830548 1.957637,-3.169507 6.711897,-6.618677 4.194937,-2.983065 5.966132,-5.127144 1.864416,-2.237299 1.864416,-5.220365 0,-2.983065 -2.237299,-4.474598 -2.144079,-1.584754 -6.059353,-1.584754 -3.915273,0 -7.737326,1.21187 -3.822053,1.211871 -7.830548,3.262729 L 28.13071,24.495382 q 4.567819,-2.516962 9.881405,-4.101716 5.313586,-1.584753 11.6526,-1.584753 9.694964,0 15.008549,4.66104 5.406807,4.66104 5.406807,11.839042 0,3.822053 -1.21187,6.618677 -1.211871,2.796624 -3.635612,5.220365 -2.423741,2.33052 -6.059352,5.033923 -2.703403,1.957637 -4.194936,3.355949 -1.491533,1.398312 -2.050858,2.703403 -0.466104,1.305091 -0.466104,3.262728 v 2.703403 H 40.435856 Z m -1.491533,18.923822 q 0,-4.288156 2.33052,-5.966131 2.33052,-1.771195 5.686469,-1.771195 3.262728,0 5.593248,1.771195 2.33052,1.677975 2.33052,5.966131 0,4.101716 -2.33052,5.966132 -2.33052,1.771195 -5.593248,1.771195 -3.355949,0 -5.686469,-1.771195 -2.33052,-1.864416 -2.33052,-5.966132 z" />\n      </g>\n      ',blunder:'\n        <g transform="translate(0 0) scale(1)">\n        <circle style="fill:#df5353" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.810558" d="m 31.799294,22.220598 c -3.67453,-10e-7 -7.050841,0.460303 -10.130961,1.378935 -3.08012,0.918633 -5.945403,2.106934 -8.593226,3.565938 l 4.297618,8.67363 c 2.3236,-1.188818 4.592722,-2.135794 6.808247,-2.838277 2.215525,-0.702483 4.45828,-1.053299 6.727842,-1.053299 2.269562,0 4.025646,0.460305 5.268502,1.378937 1.296893,0.864596 1.945788,2.160375 1.945788,3.889565 0,1.72919 -0.541416,3.241939 -1.62216,4.538831 -1.026707,1.242856 -2.756423,2.729237 -5.188097,4.458428 -2.755898,1.999376 -4.700572,3.917682 -5.835354,5.754947 -1.13478,1.837266 -1.702564,4.106388 -1.702564,6.808248 v 2.918681 h 10.4566 v -2.34982 c 0,-1.134781 0.135856,-2.081756 0.406042,-2.838277 0.324222,-0.756521 0.918373,-1.539262 1.782969,-2.349819 0.864595,-0.810559 2.079262,-1.783901 3.646342,-2.918683 2.10745,-1.567078 3.863533,-3.025082 5.268501,-4.376012 1.404967,-1.404967 2.459422,-2.919725 3.161905,-4.540841 0.702483,-1.621116 1.053298,-3.539423 1.053298,-5.754948 0,-4.160865 -1.567492,-7.591921 -4.70165,-10.29378 -3.080121,-2.70186 -7.429774,-4.052384 -13.049642,-4.052384 z m 38.66449,0 c -3.67453,-10e-7 -7.05285,0.460303 -10.132971,1.378935 -3.08012,0.918633 -5.943393,2.106934 -8.591215,3.565938 l 4.295608,8.67363 c 2.323599,-1.188818 4.592721,-2.135794 6.808246,-2.838277 2.215526,-0.702483 4.458281,-1.053299 6.727842,-1.053299 2.269563,0 4.025647,0.460305 5.268502,1.378937 1.296893,0.864596 1.945788,2.160375 1.945788,3.889565 0,1.72919 -0.539406,3.241939 -1.62015,4.538831 -1.026707,1.242856 -2.756423,2.729237 -5.188097,4.458428 -2.755897,1.999376 -4.700572,3.917682 -5.835353,5.754947 -1.134782,1.837266 -1.702564,4.106388 -1.702564,6.808248 v 2.918681 h 10.456599 v -2.34982 c 0,-1.134781 0.133846,-2.081756 0.404032,-2.838277 0.324223,-0.756521 0.918374,-1.539262 1.782969,-2.349819 0.864596,-0.810559 2.081273,-1.783901 3.648352,-2.918683 2.107451,-1.567078 3.863534,-3.025082 5.268502,-4.376012 1.404966,-1.404967 2.45942,-2.919725 3.161904,-4.540841 0.702483,-1.621116 1.053299,-3.539423 1.053299,-5.754948 0,-4.160865 -1.567493,-7.591921 -4.701651,-10.29378 -3.08012,-2.70186 -7.429774,-4.052384 -13.049642,-4.052384 z M 29.449473,68.50341 c -1.945339,0 -3.593943,0.513038 -4.944873,1.539744 -1.350931,0.97267 -2.026192,2.702386 -2.026192,5.188098 0,2.377636 0.675261,4.107352 2.026192,5.188097 1.35093,1.026707 2.999534,1.539745 4.944873,1.539745 1.891302,0 3.51153,-0.513038 4.86246,-1.539745 1.35093,-1.080745 2.026192,-2.810461 2.026192,-5.188097 0,-2.485712 -0.675262,-4.215428 -2.026192,-5.188098 -1.35093,-1.026706 -2.971158,-1.539744 -4.86246,-1.539744 z m 38.662481,0 c -1.945339,0 -3.591933,0.513038 -4.942864,1.539744 -1.35093,0.97267 -2.026192,2.702386 -2.026192,5.188098 0,2.377636 0.675262,4.107352 2.026192,5.188097 1.350931,1.026707 2.997525,1.539745 4.942864,1.539745 1.891302,0 3.513539,-0.513038 4.864469,-1.539745 1.350931,-1.080745 2.026192,-2.810461 2.026192,-5.188097 0,-2.485712 -0.675261,-4.215428 -2.026192,-5.188098 -1.35093,-1.026706 -2.973167,-1.539744 -4.864469,-1.539744 z" />\n      </g>\n      ',brilliant:'\n      <g class="layer">\n      <title>Layer 1</title>\n      <g id="svg_1" transform="matrix(1 0 0 1 0 0)">\n       <circle cx="50" cy="40.91" fill="#34c9c9" id="svg_2" r="50"/>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_6" letter-spacing="2" opacity="NaN" stroke-width="0" text-anchor="middle" transform="matrix(1 0 0 1 0 0) matrix(2.98604 -0.00493582 0.00534736 3.06578 -492.11 -36.6522)" x="179" xml:space="preserve" y="35.73">!</text>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_8" letter-spacing="2" opacity="NaN" stroke-width="0" text-anchor="middle" transform="matrix(2.98604 -0.00493582 0.00534736 3.06578 -467.792 -36.8071)" x="180" xml:space="preserve" y="35.73">!</text>\n      </g>\n      </g>\n      ',great:'<g class="layer">\n      <title>Layer 1</title>\n      <g id="svg_1" transform="matrix(1 0 0 1 0 0)">\n       <circle cx="50" cy="40.91" fill="#4242a3" id="svg_2" r="50"/>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_8" letter-spacing="2" opacity="NaN" stroke-width="0" style="cursor: move;" text-anchor="middle" transform="matrix(1 0 0 1 0 0) matrix(2.98604 -0.00493582 0.00534736 3.06578 -478.305 -36.5507)" x="180" xml:space="preserve" y="35.73">!</text>\n      </g>\n      </g>'},t.glyphToSvg={"book move":'\n      <style type="text/css">\n\t.st0{opacity:0.3;enable-background:new    ;}\n\t.st1{fill:#A5815E;}\n\t.st2{fill:#FFFFFF;}\n</style>\n      <g id="book">\n\t<path class="st0" d="M132.4-3.6c-15.2,0-27.6,12.3-27.6,27.6s12.3,27.6,27.6,27.6S160,39.1,160,23.9S147.7-3.6,132.4-3.6z"/>\n\t<path class="st1" d="M132.4-5.1c-15.2,0-27.6,12.3-27.6,27.6S117.2,50,132.4,50s27.5-12.3,27.5-27.6S147.7-5.1,132.4-5.1z"/>\n\t<g>\n\t\t<path class="st0" d="M130.7,13.5c-3-2.3-7.7-3.3-14.8-3.3h-3.3v26.6h3.3c5.2-0.4,10.3,0.9,14.8,3.6V13.5z"/>\n\t\t<path class="st0" d="M134.1,40.4c4.4-2.7,9.6-4,14.8-3.6h3.3V10.2h-3.3c-7.1,0-11.7,1-14.8,3.3V40.4z"/>\n\t\t<path class="st2" d="M130.7,11.4c-3-2.3-7.7-3.3-14.8-3.3h-1.9v26.6h1.8c5.2-0.4,10.3,0.9,14.8,3.6L130.7,11.4z"/>\n\t\t<path class="st2" d="M134.1,38.3c4.4-2.7,9.6-4,14.8-3.6h1.9V8.1H149c-7.1,0-11.7,1-14.8,3.3L134.1,38.3z"/>\n\t</g>\n</g>\n      ',inaccuracy:'\n      <g transform="translate(105 -5) scale(0.55)">\n        <circle style="fill:#56b4e9" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.81934" d="m 37.734375,21.947266 c -3.714341,0 -7.128696,0.463992 -10.242187,1.392578 -3.113493,0.928585 -6.009037,2.130656 -8.685547,3.605468 l 4.34375,8.765626 c 2.348774,-1.201699 4.643283,-2.157093 6.882812,-2.867188 2.239529,-0.710095 4.504676,-1.064453 6.798828,-1.064453 2.294152,0 4.069851,0.463993 5.326172,1.392578 1.310944,0.873963 1.966797,2.185668 1.966797,3.933594 0,1.747925 -0.546219,3.276946 -1.638672,4.58789 -1.037831,1.256322 -2.786121,2.757934 -5.24414,4.50586 -2.785757,2.021038 -4.751362,3.961188 -5.898438,5.818359 -1.147076,1.857171 -1.720703,4.149726 -1.720703,6.88086 v 2.951171 h 10.568359 v -2.376953 c 0,-1.147076 0.137043,-2.10247 0.410156,-2.867187 0.327737,-0.764718 0.928772,-1.557613 1.802735,-2.376953 0.873963,-0.81934 2.103443,-1.802143 3.6875,-2.949219 2.130284,-1.584057 3.905982,-3.058262 5.326172,-4.423828 1.420189,-1.42019 2.485218,-2.951164 3.195312,-4.589844 0.710095,-1.63868 1.064453,-3.576877 1.064453,-5.816406 0,-4.205946 -1.583838,-7.675117 -4.751953,-10.40625 -3.113492,-2.731134 -7.510649,-4.095703 -13.191406,-4.095703 z m 24.744141,0.818359 2.048828,39.083984 h 9.75 L 76.324219,22.765625 Z M 35.357422,68.730469 c -1.966416,0 -3.63248,0.51881 -4.998047,1.55664 -1.365567,0.983208 -2.046875,2.731498 -2.046875,5.244141 0,2.403397 0.681308,4.151687 2.046875,5.244141 1.365567,1.03783 3.031631,1.55664 4.998047,1.55664 1.911793,0 3.550449,-0.51881 4.916016,-1.55664 1.365566,-1.092454 2.048828,-2.840744 2.048828,-5.244141 0,-2.512643 -0.683262,-4.260933 -2.048828,-5.244141 -1.365567,-1.03783 -3.004223,-1.55664 -4.916016,-1.55664 z m 34.003906,0 c -1.966416,0 -3.63248,0.51881 -4.998047,1.55664 -1.365566,0.983208 -2.048828,2.731498 -2.048828,5.244141 0,2.403397 0.683262,4.151687 2.048828,5.244141 1.365567,1.03783 3.031631,1.55664 4.998047,1.55664 1.911793,0 3.550449,-0.51881 4.916016,-1.55664 1.365566,-1.092454 2.046875,-2.840744 2.046875,-5.244141 0,-2.512643 -0.681309,-4.260933 -2.046875,-5.244141 -1.365567,-1.03783 -3.004223,-1.55664 -4.916016,-1.55664 z" />\n      </g>\n      ',mistake:'\n      <g transform="translate(105 -5) scale(0.55)">\n        <circle style="fill:#e69f00" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.932208" d="m 40.435856,60.851495 q 0,-4.661041 1.957637,-7.830548 1.957637,-3.169507 6.711897,-6.618677 4.194937,-2.983065 5.966132,-5.127144 1.864416,-2.237299 1.864416,-5.220365 0,-2.983065 -2.237299,-4.474598 -2.144079,-1.584754 -6.059353,-1.584754 -3.915273,0 -7.737326,1.21187 -3.822053,1.211871 -7.830548,3.262729 L 28.13071,24.495382 q 4.567819,-2.516962 9.881405,-4.101716 5.313586,-1.584753 11.6526,-1.584753 9.694964,0 15.008549,4.66104 5.406807,4.66104 5.406807,11.839042 0,3.822053 -1.21187,6.618677 -1.211871,2.796624 -3.635612,5.220365 -2.423741,2.33052 -6.059352,5.033923 -2.703403,1.957637 -4.194936,3.355949 -1.491533,1.398312 -2.050858,2.703403 -0.466104,1.305091 -0.466104,3.262728 v 2.703403 H 40.435856 Z m -1.491533,18.923822 q 0,-4.288156 2.33052,-5.966131 2.33052,-1.771195 5.686469,-1.771195 3.262728,0 5.593248,1.771195 2.33052,1.677975 2.33052,5.966131 0,4.101716 -2.33052,5.966132 -2.33052,1.771195 -5.593248,1.771195 -3.355949,0 -5.686469,-1.771195 -2.33052,-1.864416 -2.33052,-5.966132 z" />\n      </g>\n      ',blunder:'\n      <g transform="translate(105 -5) scale(0.55)">\n        <circle style="fill:#df5353" cx="50" cy="50" r="50" />\n        <path style="fill:#ffffff;stroke-width:0.810558" d="m 31.799294,22.220598 c -3.67453,-10e-7 -7.050841,0.460303 -10.130961,1.378935 -3.08012,0.918633 -5.945403,2.106934 -8.593226,3.565938 l 4.297618,8.67363 c 2.3236,-1.188818 4.592722,-2.135794 6.808247,-2.838277 2.215525,-0.702483 4.45828,-1.053299 6.727842,-1.053299 2.269562,0 4.025646,0.460305 5.268502,1.378937 1.296893,0.864596 1.945788,2.160375 1.945788,3.889565 0,1.72919 -0.541416,3.241939 -1.62216,4.538831 -1.026707,1.242856 -2.756423,2.729237 -5.188097,4.458428 -2.755898,1.999376 -4.700572,3.917682 -5.835354,5.754947 -1.13478,1.837266 -1.702564,4.106388 -1.702564,6.808248 v 2.918681 h 10.4566 v -2.34982 c 0,-1.134781 0.135856,-2.081756 0.406042,-2.838277 0.324222,-0.756521 0.918373,-1.539262 1.782969,-2.349819 0.864595,-0.810559 2.079262,-1.783901 3.646342,-2.918683 2.10745,-1.567078 3.863533,-3.025082 5.268501,-4.376012 1.404967,-1.404967 2.459422,-2.919725 3.161905,-4.540841 0.702483,-1.621116 1.053298,-3.539423 1.053298,-5.754948 0,-4.160865 -1.567492,-7.591921 -4.70165,-10.29378 -3.080121,-2.70186 -7.429774,-4.052384 -13.049642,-4.052384 z m 38.66449,0 c -3.67453,-10e-7 -7.05285,0.460303 -10.132971,1.378935 -3.08012,0.918633 -5.943393,2.106934 -8.591215,3.565938 l 4.295608,8.67363 c 2.323599,-1.188818 4.592721,-2.135794 6.808246,-2.838277 2.215526,-0.702483 4.458281,-1.053299 6.727842,-1.053299 2.269563,0 4.025647,0.460305 5.268502,1.378937 1.296893,0.864596 1.945788,2.160375 1.945788,3.889565 0,1.72919 -0.539406,3.241939 -1.62015,4.538831 -1.026707,1.242856 -2.756423,2.729237 -5.188097,4.458428 -2.755897,1.999376 -4.700572,3.917682 -5.835353,5.754947 -1.134782,1.837266 -1.702564,4.106388 -1.702564,6.808248 v 2.918681 h 10.456599 v -2.34982 c 0,-1.134781 0.133846,-2.081756 0.404032,-2.838277 0.324223,-0.756521 0.918374,-1.539262 1.782969,-2.349819 0.864596,-0.810559 2.081273,-1.783901 3.648352,-2.918683 2.107451,-1.567078 3.863534,-3.025082 5.268502,-4.376012 1.404966,-1.404967 2.45942,-2.919725 3.161904,-4.540841 0.702483,-1.621116 1.053299,-3.539423 1.053299,-5.754948 0,-4.160865 -1.567493,-7.591921 -4.701651,-10.29378 -3.08012,-2.70186 -7.429774,-4.052384 -13.049642,-4.052384 z M 29.449473,68.50341 c -1.945339,0 -3.593943,0.513038 -4.944873,1.539744 -1.350931,0.97267 -2.026192,2.702386 -2.026192,5.188098 0,2.377636 0.675261,4.107352 2.026192,5.188097 1.35093,1.026707 2.999534,1.539745 4.944873,1.539745 1.891302,0 3.51153,-0.513038 4.86246,-1.539745 1.35093,-1.080745 2.026192,-2.810461 2.026192,-5.188097 0,-2.485712 -0.675262,-4.215428 -2.026192,-5.188098 -1.35093,-1.026706 -2.971158,-1.539744 -4.86246,-1.539744 z m 38.662481,0 c -1.945339,0 -3.591933,0.513038 -4.942864,1.539744 -1.35093,0.97267 -2.026192,2.702386 -2.026192,5.188098 0,2.377636 0.675262,4.107352 2.026192,5.188097 1.350931,1.026707 2.997525,1.539745 4.942864,1.539745 1.891302,0 3.513539,-0.513038 4.864469,-1.539745 1.350931,-1.080745 2.026192,-2.810461 2.026192,-5.188097 0,-2.485712 -0.675261,-4.215428 -2.026192,-5.188098 -1.35093,-1.026706 -2.973167,-1.539744 -4.864469,-1.539744 z" />\n      </g>\n      ',brilliant:'\n      <g class="layer">\n      <title>Layer 1</title>\n      <g id="svg_1" transform="matrix(0.55 0 0 0.55 0 0)">\n       <circle cx="240.91" cy="40.91" fill="#34c9c9" id="svg_2" r="50"/>\n       <text fill="#000000" font-family="Fantasy" font-size="24" id="svg_5" letter-spacing="2" opacity="0.55" stroke-width="0" text-anchor="middle" transform="matrix(3.5161 -0.00597026 0.00557864 3.28546 -551.824 -46.1199)" x="222.06" xml:space="preserve" y="36.71">!</text>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_6" letter-spacing="2" opacity="NaN" stroke-width="0" text-anchor="middle" transform="matrix(1 0 0 1 0 0) matrix(2.98604 -0.00493582 0.00534736 3.06578 -492.11 -36.6522)" x="241.41" xml:space="preserve" y="35.73">!</text>\n       <text fill="#000000" font-family="Fantasy" font-size="24" id="svg_10" letter-spacing="2" opacity="0.55" stroke-width="0" text-anchor="middle" transform="matrix(3.5161 -0.00597026 0.00557864 3.28546 -526.666 -44.4195)" x="221.91" xml:space="preserve" y="36.15">!</text>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_8" letter-spacing="2" opacity="NaN" stroke-width="0" text-anchor="middle" transform="matrix(2.98604 -0.00493582 0.00534736 3.06578 -467.792 -36.8071)" x="241.41" xml:space="preserve" y="35.73">!</text>\n      </g>\n      </g>\n      ',great:'<g class="layer">\n      <title>Layer 1</title>\n      <g id="svg_1" transform="matrix(0.55 0 0 0.55 0 0)">\n       <circle cx="240.91" cy="40.91" fill="#4242a3" id="svg_2" r="50"/>\n       <text fill="#000000" font-family="Fantasy" font-size="24" id="svg_10" letter-spacing="2" opacity="0.55" stroke-width="0" text-anchor="middle" transform="matrix(1 0 0 1 0 0) matrix(3.5161 -0.00597026 0.00557864 3.28546 -536.922 -42.881)" x="221.91" xml:space="preserve" y="36.15">!</text>\n       <text fill="#ffffff" font-family="Fantasy" font-size="24" id="svg_8" letter-spacing="2" opacity="NaN" stroke-width="0" style="cursor: move;" text-anchor="middle" transform="matrix(1 0 0 1 0 0) matrix(2.98604 -0.00493582 0.00534736 3.06578 -478.305 -36.5507)" x="241.41" xml:space="preserve" y="35.73">!</text>\n      </g>\n      </g>'}}(n||(n={}))},616:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{sV:()=>v,tQ:()=>b});var a=r(949),o=r(228),i=r(868),s=r(328),p=r(214),c=r(924),l=r(277),h=r(510),P=t([a,s,p,h]);[a,s,p,h]=P.then?(await P)():P;const f=new c.Y(document.getElementById("sidebarComponent")),u=new i.Q("myChart"),v=new s.C(u,f);var d=new a.b(v);const g=await(0,l.e)(!0),m=new h.n(g,v,document.getElementById("liveEvaluationContainer")),b=new p.Z(v,d,m);await d.loadOpeningsBase(),f.playerController=b,f.guiHandler=v,u.playerControllerInst=b,window.playerControllerInst=b,b.ready,b.ready=!0,("https://www.chessvanced.com/"==window.location.href||"https://chessvanced.com/"==window.location.href||"http://localhost:8000/"==window.location.href)&&b.setGameFromExtension(o.w$,o.MK,o.T5,o.uL,"black",{}),window.location.href,n()}catch(t){n(t)}}),1)},228:(t,e,r)=>{r.d(e,{MK:()=>o,T5:()=>a,uL:()=>n,w$:()=>i});const n=JSON.parse('[{"0":{"move":"g1f3","CP":34,"cpOrMate":"cp","FEN":"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1","depth":21},"1":{"move":"d2d4","CP":25,"cpOrMate":"cp","FEN":"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1","depth":21}},{"0":{"move":"e7e6","CP":-15,"cpOrMate":"cp","FEN":"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1","depth":20},"1":{"move":"e7e5","CP":14,"cpOrMate":"cp","FEN":"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1","depth":20}},{"0":{"move":"g1f3","CP":77,"cpOrMate":"cp","FEN":"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6 0 2","depth":21},"1":{"move":"b1c3","CP":52,"cpOrMate":"cp","FEN":"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6 0 2","depth":20}},{"0":{"move":"d7d6","CP":17,"cpOrMate":"cp","FEN":"rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2","depth":20},"1":{"move":"b8c6","CP":35,"cpOrMate":"cp","FEN":"rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2","depth":20}},{"0":{"move":"f1b5","CP":73,"cpOrMate":"cp","FEN":"r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 3","depth":20},"1":{"move":"f1c4","CP":55,"cpOrMate":"cp","FEN":"r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 3","depth":20}},{"0":{"move":"d7d6","CP":5,"cpOrMate":"cp","FEN":"r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R b KQkq - 3 3","depth":19},"1":{"move":"g8f6","CP":25,"cpOrMate":"cp","FEN":"r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R b KQkq - 3 3","depth":19}},{"0":{"move":"c2c3","CP":79,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4","depth":21},"1":{"move":"e1g1","CP":56,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4","depth":20}},{"0":{"move":"c5b4","CP":-91,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/2b1p3/1PB1P3/5N2/P1PP1PPP/RNBQK2R b KQkq b3 0 4","depth":19},"1":{"move":"c5b6","CP":7,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/2b1p3/1PB1P3/5N2/P1PP1PPP/RNBQK2R b KQkq b3 0 4","depth":19}},{"0":{"move":"c2c3","CP":-29,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/5N2/P1PP1PPP/RNBQK2R w KQkq - 0 5","depth":20},"1":{"move":"e1g1","CP":-61,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/5N2/P1PP1PPP/RNBQK2R w KQkq - 0 5","depth":20}},{"0":{"move":"b4a5","CP":-45,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/2P2N2/P2P1PPP/RNBQK2R b KQkq - 0 5","depth":20},"1":{"move":"b4d6","CP":-32,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/2P2N2/P2P1PPP/RNBQK2R b KQkq - 0 5","depth":19}},{"0":{"move":"d2d4","CP":0,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQK2R w KQkq - 1 6","depth":20},"1":{"move":"e1g1","CP":-9,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQK2R w KQkq - 1 6","depth":20}},{"0":{"move":"d7d6","CP":-65,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 b kq - 2 6","depth":22},"1":{"move":"g8f6","CP":-64,"cpOrMate":"cp","FEN":"r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 b kq - 2 6","depth":22}},{"0":{"move":"d2d4","CP":0,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 w kq - 3 7","depth":21},"1":{"move":"d1c2","CP":-83,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 w kq - 3 7","depth":21}},{"0":{"move":"e5d4","CP":-73,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b3p3/2BPP3/2P2N2/P4PPP/RNBQ1RK1 b kq d3 0 7","depth":22},"1":{"move":"d7d6","CP":-56,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b3p3/2BPP3/2P2N2/P4PPP/RNBQ1RK1 b kq d3 0 7","depth":22}},{"0":{"move":"c1a3","CP":-48,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b7/2BpP3/2P2N2/P4PPP/RNBQ1RK1 w kq - 0 8","depth":20},"1":{"move":"e4e5","CP":-56,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b7/2BpP3/2P2N2/P4PPP/RNBQ1RK1 w kq - 0 8","depth":20}},{"0":{"move":"d7d6","CP":-126,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b7/2BPP3/5N2/P4PPP/RNBQ1RK1 b kq - 0 8","depth":20},"1":{"move":"f6e4","CP":-89,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n2n2/b7/2BPP3/5N2/P4PPP/RNBQ1RK1 b kq - 0 8","depth":20}},{"0":{"move":"d4d5","CP":-77,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n5/b7/2BPn3/5N2/P4PPP/RNBQ1RK1 w kq - 0 9","depth":21},"1":{"move":"b1d2","CP":-109,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n5/b7/2BPn3/5N2/P4PPP/RNBQ1RK1 w kq - 0 9","depth":21}},{"0":{"move":"c6e7","CP":-110,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n5/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 b kq - 0 9","depth":21},"1":{"move":"c6b8","CP":7,"cpOrMate":"cp","FEN":"r1bqk2r/pppp1ppp/2n5/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 b kq - 0 9","depth":21}},{"0":{"move":"b1d2","CP":150,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/8/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 w kq - 1 10","depth":22},"1":{"move":"c1a3","CP":47,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/8/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 w kq - 1 10","depth":22}},{"0":{"move":"e4f6","CP":-140,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/8/b2P4/2BQn3/5N2/P4PPP/RNB2RK1 b kq - 2 10","depth":22},"1":{"move":"f7f5","CP":54,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/8/b2P4/2BQn3/5N2/P4PPP/RNB2RK1 b kq - 2 10","depth":22}},{"0":{"move":"d5d6","CP":-54,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/5n2/b2P4/2BQ4/5N2/P4PPP/RNB2RK1 w kq - 3 11","depth":21},"1":{"move":"d4e3","CP":-86,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/5n2/b2P4/2BQ4/5N2/P4PPP/RNB2RK1 w kq - 3 11","depth":20}},{"0":{"move":"b7b6","CP":-166,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/5n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 b kq - 4 11","depth":20},"1":{"move":"c7c6","CP":-29,"cpOrMate":"cp","FEN":"rnbqk2r/pppp1ppp/5n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 b kq - 4 11","depth":19}},{"0":{"move":"c5a5","CP":329,"cpOrMate":"cp","FEN":"rnbqk2r/ppp2ppp/3p1n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 w kq - 0 12","depth":20},"1":{"move":"c5e3","CP":-86,"cpOrMate":"cp","FEN":"rnbqk2r/ppp2ppp/3p1n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 w kq - 0 12","depth":19}},{"0":{"move":"e8g8","CP":320,"cpOrMate":"cp","FEN":"rnbqk2r/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 b kq - 0 12","depth":19},"1":{"move":"e8f8","CP":473,"cpOrMate":"cp","FEN":"rnbqk2r/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 b kq - 0 12","depth":19}},{"0":{"move":"c1b2","CP":350,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 w - - 1 13","depth":21},"1":{"move":"a5d2","CP":333,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 w - - 1 13","depth":20}},{"0":{"move":"b8d7","CP":271,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2ppp/3p1n2/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 b - - 2 13","depth":20},"1":{"move":"h7h6","CP":294,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2ppp/3p1n2/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 b - - 2 13","depth":20}},{"0":{"move":"g5f6","CP":320,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2pp1/3p1n1p/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 w - - 0 14","depth":21},"1":{"move":"g5h4","CP":324,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2pp1/3p1n1p/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 w - - 0 14","depth":20}},{"0":{"move":"c8f5","CP":273,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2pp1/3p1n1p/Q2P4/2B4B/5N2/P4PPP/RN3RK1 b - - 1 14","depth":21},"1":{"move":"c8g4","CP":279,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2pp1/3p1n1p/Q2P4/2B4B/5N2/P4PPP/RN3RK1 b - - 1 14","depth":21}},{"0":{"move":"f3g5","CP":370,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n1p/Q2P2p1/2B4B/5N2/P4PPP/RN3RK1 w - g6 0 15","depth":21},"1":{"move":"h4g3","CP":332,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n1p/Q2P2p1/2B4B/5N2/P4PPP/RN3RK1 w - g6 0 15","depth":21}},{"0":{"move":"h6g5","CP":414,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n1p/Q2P2N1/2B4B/8/P4PPP/RN3RK1 b - - 0 15","depth":21},"1":{"move":"b7b6","CP":546,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n1p/Q2P2N1/2B4B/8/P4PPP/RN3RK1 b - - 0 15","depth":20}},{"0":{"move":"h4g5","CP":374,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n2/Q2P2p1/2B4B/8/P4PPP/RN3RK1 w - - 0 16","depth":21},"1":{"move":"h4g3","CP":-18,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n2/Q2P2p1/2B4B/8/P4PPP/RN3RK1 w - - 0 16","depth":21}},{"0":{"move":"f8e8","CP":364,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n2/Q2P2B1/2B5/8/P4PPP/RN3RK1 b - - 0 16","depth":23},"1":{"move":"c8f5","CP":348,"cpOrMate":"cp","FEN":"rnbq1rk1/ppp2p2/3p1n2/Q2P2B1/2B5/8/P4PPP/RN3RK1 b - - 0 16","depth":22}},{"0":{"move":"b1d2","CP":400,"cpOrMate":"cp","FEN":"rn1q1rk1/ppp2p2/3p1n2/Q2P1bB1/2B5/8/P4PPP/RN3RK1 w - - 1 17","depth":22},"1":{"move":"f1e1","CP":363,"cpOrMate":"cp","FEN":"rn1q1rk1/ppp2p2/3p1n2/Q2P1bB1/2B5/8/P4PPP/RN3RK1 w - - 1 17","depth":22}},{"0":{"move":"d8f6","CP":88,"cpOrMate":"cp","FEN":"rn1q1rk1/ppp2p2/3p1B2/Q2P1b2/2B5/8/P4PPP/RN3RK1 b - - 0 17","depth":20},"1":{"move":"d8c8","CP":814,"cpOrMate":"cp","FEN":"rn1q1rk1/ppp2p2/3p1B2/Q2P1b2/2B5/8/P4PPP/RN3RK1 b - - 0 17","depth":19}},{"0":{"move":"b1a3","CP":126,"cpOrMate":"cp","FEN":"rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P4PPP/RN3RK1 w - - 0 18","depth":19},"1":{"move":"b1d2","CP":108,"cpOrMate":"cp","FEN":"rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P4PPP/RN3RK1 w - - 0 18","depth":18}},{"0":{"move":"c7c5","CP":64,"cpOrMate":"cp","FEN":"rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 b - - 1 18","depth":19},"1":{"move":"b8d7","CP":94,"cpOrMate":"cp","FEN":"rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 b - - 1 18","depth":19}},{"0":{"move":"a1e1","CP":166,"cpOrMate":"cp","FEN":"rn3r1k/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 w - - 2 19","depth":19},"1":{"move":"f1e1","CP":116,"cpOrMate":"cp","FEN":"rn3r1k/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 w - - 2 19","depth":19}},{"0":{"move":"b8d7","CP":79,"cpOrMate":"cp","FEN":"rn3r1k/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 b - - 0 19","depth":21},"1":{"move":"f8g8","CP":110,"cpOrMate":"cp","FEN":"rn3r1k/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 b - - 0 19","depth":21}},{"0":{"move":"a1d1","CP":161,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 w - - 1 20","depth":20},"1":{"move":"g2g3","CP":129,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 w - - 1 20","depth":20}},{"0":{"move":"f5h3","CP":-1079,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/5N2/P4PPP/R4RK1 b - - 2 20","depth":23},"1":{"move":"f5e4","CP":-651,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/5N2/P4PPP/R4RK1 b - - 2 20","depth":23}},{"0":{"move":"c4e2","CP":-1094,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/5N1b/P4PPP/R4RK1 w - - 3 21","depth":23},"1":{"move":"f3h4","CP":-1108,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/5N1b/P4PPP/R4RK1 w - - 3 21","depth":22}},{"0":{"move":"h3g2","CP":-1289,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/7b/P4PPP/R3NRK1 b - - 4 21","depth":22},"1":{"move":"b8d7","CP":-686,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/7b/P4PPP/R3NRK1 b - - 4 21","depth":22}},{"0":{"move":"c7c8","CP":-1274,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PbP/R3NRK1 w - - 0 22","depth":22},"1":{"move":"f2f3","CP":-12,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PbP/R3NRK1 w - - 0 22","depth":22}},{"0":{"move":"f6g5","CP":-2,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PNP/R4RK1 b - - 0 22","depth":245},"1":{"move":"f6f3","CP":-2,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PNP/R4RK1 b - - 0 22","depth":245}},{"0":{"move":"a2a3","CP":-1,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p4/3P2q1/2B5/8/P4PNP/R4RK1 w - - 1 23","depth":245},"1":{"move":"f2f3","CP":-1,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p4/3P2q1/2B5/8/P4PNP/R4RK1 w - - 1 23","depth":245}},{"0":{"move":"g5g2","CP":-1,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p4/3P2q1/8/8/P3BPNP/R4RK1 b - - 2 23","depth":29},"1":{"move":"b8c6","CP":-96,"cpOrMate":"cp","FEN":"rn4rk/ppQ2p2/3p4/3P2q1/8/8/P3BPNP/R4RK1 b - - 2 23","depth":28}}, {"0":{"move":-1,"isCheckmated":true,"CP":1,"cpOrMate":"mate","FEN":"rn4rk/ppQ2p2/3p4/3P4/8/8/P3BPqP/R4RK1 w - - 0 24","depth":123}}]'),a=JSON.parse('[{"evaluation":7.444251681165904,"CP":75,"moveRating":"gray"},{"evaluation":-1.49955016194101,"CP":-15,"moveRating":"gray"},{"evaluation":7.639700890275547,"CP":77,"moveRating":"good"},{"evaluation":1.699345236094496,"CP":17,"moveRating":"best"},{"evaluation":7.248569538880945,"CP":73,"moveRating":"good"},{"evaluation":0.49998333399997597,"CP":5,"moveRating":"good"},{"evaluation":7.834911338823836,"CP":79,"moveRating":"gray"},{"evaluation":-9.000837522888,"CP":-91,"moveRating":"gray"},{"evaluation":-2.8967525030951844,"CP":-29,"moveRating":"best"},{"evaluation":-4.487889237358006,"CP":-45,"moveRating":"best"},{"evaluation":0,"CP":0,"moveRating":"best"},{"evaluation":-6.463629180302921,"CP":-65,"moveRating":"good"},{"evaluation":0,"CP":0,"moveRating":"good"},{"evaluation":-7.248569538880945,"CP":-73,"moveRating":"best"},{"evaluation":-4.785308556162748,"CP":-48,"moveRating":"best"},{"evaluation":-12.339888456961523,"CP":-126,"moveRating":"gray"},{"evaluation":-7.639700890275552,"CP":-77,"moveRating":"good"},{"evaluation":-10.825903074651439,"CP":-110,"moveRating":"best"},{"evaluation":14.56563062257954,"CP":150,"moveRating":"mistake"},{"evaluation":-13.645254028156634,"CP":-140,"moveRating":"mistake"},{"evaluation":-5.379102294920174,"CP":-54,"moveRating":"best"},{"evaluation":-16.015835972375736,"CP":-166,"moveRating":"gray"},{"evaluation":28.85154409609071,"CP":329,"moveRating":"mistake"},{"evaluation":28.24497764231124,"CP":320,"moveRating":"great"},{"evaluation":30.21838885585818,"CP":350,"moveRating":"great"},{"evaluation":24.725019958306905,"CP":271,"moveRating":"gray"},{"evaluation":28.24497764231124,"CP":320,"moveRating":"good"},{"evaluation":24.875814752769553,"CP":273,"moveRating":"good"},{"evaluation":31.457258070701776,"CP":370,"moveRating":"gray"},{"evaluation":33.97003196067644,"CP":414,"moveRating":"brilliant"},{"evaluation":31.697713237722212,"CP":374,"moveRating":"great"},{"evaluation":31.092012271281078,"CP":364,"moveRating":"great"},{"evaluation":33.201838513392445,"CP":400,"moveRating":"good"},{"evaluation":8.71024895421696,"CP":88,"moveRating":"mistake"},{"evaluation":12.339888456961534,"CP":126,"moveRating":"great"},{"evaluation":6.365275022536809,"CP":64,"moveRating":"good"},{"evaluation":16.015835972375736,"CP":166,"moveRating":"gray"},{"evaluation":7.834911338823836,"CP":79,"moveRating":"gray"},{"evaluation":15.565710549848433,"CP":161,"moveRating":"good"},{"evaluation":-48.682276845378354,"CP":-1079,"moveRating":"mistake"},{"evaluation":-48.75806202676917,"CP":-1094,"moveRating":"great"},{"evaluation":-49.42683289562925,"CP":-1289,"moveRating":"gray"},{"evaluation":-49.39160585245791,"CP":-1274,"moveRating":"brilliant"},{"CP":"M-2","evaluation":-49,"moveRating":"gray"},{"CP":"M-1","evaluation":-49,"moveRating":"best"},{"CP":"M-1","evaluation":-49,"moveRating":"gray"}, {"CP":"M0","evaluation":-49,"moveRating":"best"}]'),o=JSON.parse('[{"color":"w","from":"e2","to":"e4","flags":"b","piece":"p","san":"e4","fromto":"e2e4"},{"color":"b","from":"e7","to":"e5","flags":"b","piece":"p","san":"e5","fromto":"e7e5"},{"color":"w","from":"g1","to":"f3","flags":"n","piece":"n","san":"Nf3","fromto":"g1f3"},{"color":"b","from":"b8","to":"c6","flags":"n","piece":"n","san":"Nc6","fromto":"b8c6"},{"color":"w","from":"f1","to":"c4","flags":"n","piece":"b","san":"Bc4","fromto":"f1c4"},{"color":"b","from":"f8","to":"c5","flags":"n","piece":"b","san":"Bc5","fromto":"f8c5"},{"color":"w","from":"b2","to":"b4","flags":"b","piece":"p","san":"b4","fromto":"b2b4"},{"color":"b","from":"c5","to":"b4","flags":"c","piece":"b","captured":"p","san":"Bxb4","fromto":"c5b4"},{"color":"w","from":"c2","to":"c3","flags":"n","piece":"p","san":"c3","fromto":"c2c3"},{"color":"b","from":"b4","to":"a5","flags":"n","piece":"b","san":"Ba5","fromto":"b4a5"},{"color":"w","from":"e1","to":"g1","flags":"k","piece":"k","san":"O-O","fromto":"e1g1"},{"color":"b","from":"g8","to":"f6","flags":"n","piece":"n","san":"Nf6","fromto":"g8f6"},{"color":"w","from":"d2","to":"d4","flags":"b","piece":"p","san":"d4","fromto":"d2d4"},{"color":"b","from":"e5","to":"d4","flags":"c","piece":"p","captured":"p","san":"exd4","fromto":"e5d4"},{"color":"w","from":"c3","to":"d4","flags":"c","piece":"p","captured":"p","san":"cxd4","fromto":"c3d4"},{"color":"b","from":"f6","to":"e4","flags":"c","piece":"n","captured":"p","san":"Nxe4","fromto":"f6e4"},{"color":"w","from":"d4","to":"d5","flags":"n","piece":"p","san":"d5","fromto":"d4d5"},{"color":"b","from":"c6","to":"b8","flags":"n","piece":"n","san":"Nb8","fromto":"c6b8"},{"color":"w","from":"d1","to":"d4","flags":"n","piece":"q","san":"Qd4","fromto":"d1d4"},{"color":"b","from":"e4","to":"f6","flags":"n","piece":"n","san":"Nf6","fromto":"e4f6"},{"color":"w","from":"d4","to":"c5","flags":"n","piece":"q","san":"Qc5","fromto":"d4c5"},{"color":"b","from":"d7","to":"d6","flags":"n","piece":"p","san":"d6","fromto":"d7d6"},{"color":"w","from":"c5","to":"a5","flags":"c","piece":"q","captured":"b","san":"Qxa5","fromto":"c5a5"},{"color":"b","from":"e8","to":"g8","flags":"k","piece":"k","san":"O-O","fromto":"e8g8"},{"color":"w","from":"c1","to":"g5","flags":"n","piece":"b","san":"Bg5","fromto":"c1g5"},{"color":"b","from":"h7","to":"h6","flags":"n","piece":"p","san":"h6","fromto":"h7h6"},{"color":"w","from":"g5","to":"h4","flags":"n","piece":"b","san":"Bh4","fromto":"g5h4"},{"color":"b","from":"g7","to":"g5","flags":"b","piece":"p","san":"g5","fromto":"g7g5"},{"color":"w","from":"f3","to":"g5","flags":"c","piece":"n","captured":"p","san":"Nxg5","fromto":"f3g5"},{"color":"b","from":"h6","to":"g5","flags":"c","piece":"p","captured":"n","san":"hxg5","fromto":"h6g5"},{"color":"w","from":"h4","to":"g5","flags":"c","piece":"b","captured":"p","san":"Bxg5","fromto":"h4g5"},{"color":"b","from":"c8","to":"f5","flags":"n","piece":"b","san":"Bf5","fromto":"c8f5"},{"color":"w","from":"g5","to":"f6","flags":"c","piece":"b","captured":"n","san":"Bxf6","fromto":"g5f6"},{"color":"b","from":"d8","to":"f6","flags":"c","piece":"q","captured":"b","san":"Qxf6","fromto":"d8f6"},{"color":"w","from":"b1","to":"d2","flags":"n","piece":"n","san":"Nd2","fromto":"b1d2"},{"color":"b","from":"g8","to":"h8","flags":"n","piece":"k","san":"Kh8","fromto":"g8h8"},{"color":"w","from":"a5","to":"c7","flags":"c","piece":"q","captured":"p","san":"Qxc7","fromto":"a5c7"},{"color":"b","from":"f8","to":"g8","flags":"n","piece":"r","san":"Rg8","fromto":"f8g8"},{"color":"w","from":"d2","to":"f3","flags":"n","piece":"n","san":"Nf3","fromto":"d2f3"},{"color":"b","from":"f5","to":"h3","flags":"n","piece":"b","san":"Bh3","fromto":"f5h3"},{"color":"w","from":"f3","to":"e1","flags":"n","piece":"n","san":"Ne1","fromto":"f3e1"},{"color":"b","from":"h3","to":"g2","flags":"c","piece":"b","captured":"p","san":"Bxg2","fromto":"h3g2"},{"color":"w","from":"e1","to":"g2","flags":"c","piece":"n","captured":"b","san":"Nxg2","fromto":"e1g2"},{"color":"b","from":"f6","to":"g5","flags":"n","piece":"q","san":"Qg5","fromto":"f6g5"},{"color":"w","from":"c4","to":"e2","flags":"n","piece":"b","san":"Be2","fromto":"c4e2"},{"color":"b","from":"g5","to":"g2","flags":"c","piece":"q","captured":"n","san":"Qxg2#","fromto":"g5g2"}]'),i=JSON.parse('["rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1","rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3 0 1","rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6 0 2","rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2","r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 3","r1bqkbnr/pppp1ppp/2n5/4p3/2B1P3/5N2/PPPP1PPP/RNBQK2R b KQkq - 3 3","r1bqk1nr/pppp1ppp/2n5/2b1p3/2B1P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4","r1bqk1nr/pppp1ppp/2n5/2b1p3/1PB1P3/5N2/P1PP1PPP/RNBQK2R b KQkq b3 0 4","r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/5N2/P1PP1PPP/RNBQK2R w KQkq - 0 5","r1bqk1nr/pppp1ppp/2n5/4p3/1bB1P3/2P2N2/P2P1PPP/RNBQK2R b KQkq - 0 5","r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQK2R w KQkq - 1 6","r1bqk1nr/pppp1ppp/2n5/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 b kq - 2 6","r1bqk2r/pppp1ppp/2n2n2/b3p3/2B1P3/2P2N2/P2P1PPP/RNBQ1RK1 w kq - 3 7","r1bqk2r/pppp1ppp/2n2n2/b3p3/2BPP3/2P2N2/P4PPP/RNBQ1RK1 b kq d3 0 7","r1bqk2r/pppp1ppp/2n2n2/b7/2BpP3/2P2N2/P4PPP/RNBQ1RK1 w kq - 0 8","r1bqk2r/pppp1ppp/2n2n2/b7/2BPP3/5N2/P4PPP/RNBQ1RK1 b kq - 0 8","r1bqk2r/pppp1ppp/2n5/b7/2BPn3/5N2/P4PPP/RNBQ1RK1 w kq - 0 9","r1bqk2r/pppp1ppp/2n5/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 b kq - 0 9","rnbqk2r/pppp1ppp/8/b2P4/2B1n3/5N2/P4PPP/RNBQ1RK1 w kq - 1 10","rnbqk2r/pppp1ppp/8/b2P4/2BQn3/5N2/P4PPP/RNB2RK1 b kq - 2 10","rnbqk2r/pppp1ppp/5n2/b2P4/2BQ4/5N2/P4PPP/RNB2RK1 w kq - 3 11","rnbqk2r/pppp1ppp/5n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 b kq - 4 11","rnbqk2r/ppp2ppp/3p1n2/b1QP4/2B5/5N2/P4PPP/RNB2RK1 w kq - 0 12","rnbqk2r/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 b kq - 0 12","rnbq1rk1/ppp2ppp/3p1n2/Q2P4/2B5/5N2/P4PPP/RNB2RK1 w - - 1 13","rnbq1rk1/ppp2ppp/3p1n2/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 b - - 2 13","rnbq1rk1/ppp2pp1/3p1n1p/Q2P2B1/2B5/5N2/P4PPP/RN3RK1 w - - 0 14","rnbq1rk1/ppp2pp1/3p1n1p/Q2P4/2B4B/5N2/P4PPP/RN3RK1 b - - 1 14","rnbq1rk1/ppp2p2/3p1n1p/Q2P2p1/2B4B/5N2/P4PPP/RN3RK1 w - g6 0 15","rnbq1rk1/ppp2p2/3p1n1p/Q2P2N1/2B4B/8/P4PPP/RN3RK1 b - - 0 15","rnbq1rk1/ppp2p2/3p1n2/Q2P2p1/2B4B/8/P4PPP/RN3RK1 w - - 0 16","rnbq1rk1/ppp2p2/3p1n2/Q2P2B1/2B5/8/P4PPP/RN3RK1 b - - 0 16","rn1q1rk1/ppp2p2/3p1n2/Q2P1bB1/2B5/8/P4PPP/RN3RK1 w - - 1 17","rn1q1rk1/ppp2p2/3p1B2/Q2P1b2/2B5/8/P4PPP/RN3RK1 b - - 0 17","rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P4PPP/RN3RK1 w - - 0 18","rn3rk1/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 b - - 1 18","rn3r1k/ppp2p2/3p1q2/Q2P1b2/2B5/8/P2N1PPP/R4RK1 w - - 2 19","rn3r1k/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 b - - 0 19","rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/8/P2N1PPP/R4RK1 w - - 1 20","rn4rk/ppQ2p2/3p1q2/3P1b2/2B5/5N2/P4PPP/R4RK1 b - - 2 20","rn4rk/ppQ2p2/3p1q2/3P4/2B5/5N1b/P4PPP/R4RK1 w - - 3 21","rn4rk/ppQ2p2/3p1q2/3P4/2B5/7b/P4PPP/R3NRK1 b - - 4 21","rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PbP/R3NRK1 w - - 0 22","rn4rk/ppQ2p2/3p1q2/3P4/2B5/8/P4PNP/R4RK1 b - - 0 22","rn4rk/ppQ2p2/3p4/3P2q1/2B5/8/P4PNP/R4RK1 w - - 1 23","rn4rk/ppQ2p2/3p4/3P2q1/8/8/P3BPNP/R4RK1 b - - 2 23","rn4rk/ppQ2p2/3p4/3P4/8/8/P3BPqP/R4RK1 w - - 0 24"]')},261:(t,e,r)=>{r.d(e,{FB:()=>a,HX:()=>u,QZ:()=>o});var n=r(887);function a(t){const e=(0,n.qQ)();e.load_pgn(t);const r=e.history();var a=[];const o=(0,n.qQ)();return a.push(o.fen()),r.forEach(((t,e)=>{o.move(t),a.push(o.fen())})),a}function o(t){const e=(0,n.qQ)();e.load_pgn(t);const r=e.history({verbose:!0});return r.forEach(((t,e)=>{t.fromto=t.from+t.to})),r}const i={q:9,r:5,b:3,n:3,p:1,k:0};function s(t){return String.fromCharCode(97+t%8)+(8-Math.floor(t/8))}function p(t,e,r){if(r!=t.turn()){const e=l(t.fen());t=(0,n.qQ)(e)}let a=0;const o=t.get(e);if(null==o)return 0;if(o.color==r)return 0;const[i,s]=function(t,e,r){const n=t.get(e);if(n&&n.color===r)return[-1,-1];const a=function(t,e,r){const n=t.moves({verbose:!0});var a=[];for(const t of n)t.to==r&&a.push(t.from);return a}(t,0,e);let o=null,i=-1;for(const e of a){const r=t.get(e).type;(null===o||c(r)<c(o))&&(o=r,i=e)}return[o,i]}(t,e,r),h=o.type;if(i&&h){!function(t,e){t.move({from:e.substring(0,2),to:e.substring(2,4)})}(t,`${s}${e}`),a=Math.max(0,c(h)-p(t,e,function(t){return"w"===t?"b":"w"}(r))),function(t){t.undo()}(t)}return a}function c(t){const e=t.toLowerCase();return i[e]}function l(t){var e=t.split(" ");return"w"==e[1]?e[1]="b":e[1]="w",t=e.join(" ")}function h(t){return t.split(" ")[1]}function P(t,e){let r=0;h(t)!=e&&(t=l(t));for(let n=0;n<64;n++)r=Math.max(r,d(t,s(n),e));return r}function d(t,e,r){return p((0,n.qQ)(t),e,r)}function f(t,e){const r=(0,n.qQ)();r.load(t);let a=0;for(let t=0;t<64;t++){const n=s(t),o=r.get(n);if(null!==o&&o.color===e){a+=c(o.type)}}return a}function u(t,e,r,a){if(function(t){const e=(0,n.qQ)(t);return!(!e.in_check()||1!=e.moves.length)}(e))return[!1,!1];const o=h(t),i=f(t,o)-f(r,o),s=P(r,o),p=P(t,o);return d(e,a.substring(0,2),o)+1+i<d(r,a.substring(2,4),o)?[!0,!0]:i?[0<s-p-i,!1]:[1<s-p-i,!1]}},277:(t,e,r)=>{r.d(e,{e:()=>o});class n{constructor(){this.data={}}cachedDataToParsed(t){const e={};for(let r=0;r<2;r++)e[r]={},e[r].FEN=t.fen,"cp"in t.pvs[r]?(e[r].CP=t.pvs[r].cp,e[r].move=t.pvs[r].moves.split(" ")[0],e[r].cpOrMate="cp"):(e[r].CP=t.pvs[r].mate,e[r].move=t.pvs[r].moves.split(" ")[0],e[r].cpOrMate="mate"),e[r].depth=t.depth;return e}getEval(){return this.data[0].CP}sendMessage(t,e){const r="w"==e.split(" ")[1];if("info depth 0 score mate 0"==t)this.data[0]={move:-1,isCheckmated:!0,CP:r?1:-1,cpOrMate:"mate"},this.data[0].FEN=e,this.data[0].depth=123;else{const n=function(t){const e=t.match(/depth (\d+)/);if(e)return parseInt(e[1]);return-1}(t),a=function(t){const e=t.match(/multipv\s(\d+)/);return e?parseInt(e[1]):null}(t),o=function(t){const e=t.match(/pv\s(\w{4})/);if(e)return e[1]}(t),i=function(t){const e=t.match(/ pv (.*)/);if(e)return e[1].trim().split(/\s+/)}(t);if(o){const s=function(t,e){const r=t.match(/score cp (-?\d+)/),n=t.match(/score mate (-?\d+)/);if(r)return{value:parseInt(r[1]),cpOrMate:"cp",isWhiteMove:e};if(n)return{value:parseInt(n[1]),cpOrMate:"mate",isWhiteMove:e}}(t,r);this.data[a-1]={move:o,CP:s.value*(r?1:-1),cpOrMate:s.cpOrMate,allMoves:i},this.data[a-1].FEN=e,this.data[a-1].depth=n}}}getAllData(){return this.data}clearData(){this.data={}}}var a=r(475);async function o(t){var e;await Stockfish().then((t=>{e=t}));const r=new i(e,t);return e.addMessageListener((t=>{r.handleMainMessage({from:"stockfish",message:t})})),r}class i{constructor(t,e){this.isLiveBoardEvaluation=e,this.stockfishWorker=t,this.stockfishParser=new n,this.moveTimeLengthMs=e?1e5:a.D.STOCKFISH_MOVETIME,this.isCurrentlyWorking=null,this.currentFEN=null,this.analysisOrchestrator=null,this.whiteMove=!0,/Android|iPhone/i.test(navigator.userAgent)?this.moveTimeLengthMs=500:this.stockfishWorker.postMessage("setoption name Hash value 256"),this.stockfishWorker.postMessage("setoption name Threads value 1"),this.stockfishWorker.postMessage("setoption name MultiPV value 2"),self.onmessage=this.handleMainMessage.bind(this)}async getLichessData(t){try{const e=`https://lichess.org/api/cloud-eval?fen=${encodeURIComponent(t)}&multiPv=2`,r=await axios.get(e);return r.data.fen?r.data.pvs.length<2?[!1]:[!0,r.data]:[!1,r.data]}catch(t){return[!1]}}async checkCache(t){const e=await this.getLichessData(t);return 1==e[0]?[!0,this.stockfishParser.cachedDataToParsed(e[1])]:[!1]}deleteWorker(){this.stockfishWorker.terminate()}clearData(){this.stockfishWorker.postMessage("stop"),this.stockfishParser.clearData(),this.whiteMove=!0,this.isCurrentlyWorking=!1}setCallback(t){this.callbackFunction=t}fillRestOfDataForAnalysisOrchestrator(t){var e={};return e.positionEvaluation=t,e.FENstring=this.currentFEN,e.regularMove=this.currentRegularMove,e.moveIndex=this.moveIndex,e}async getAnalsysForFenPosition(t,e,r){if(this.currentFEN=t,this.currentRegularMove=e,this.moveIndex=r,!this.isLiveBoardEvaluation){const e=await this.checkCache(t);if(1==e[0])return this.callbackFunction(this.fillRestOfDataForAnalysisOrchestrator(e[1])),void(this.isCurrentlyWorking=!1)}this.stockfishWorker.postMessage(`position fen ${t}`),this.stockfishWorker.postMessage(`go movetime ${this.moveTimeLengthMs}`)}async waitForRun(t,e,r){for(;this.isCurrentlyWorking;)await new Promise((t=>setTimeout(t,100)));this.isCurrentlyWorking=!0,await this.getAnalsysForFenPosition(t,e,r)}async stopAndStartNewAnalysis(t){this.stockfishWorker.postMessage("stop"),this.getAnalsysForFenPosition(t,"",0)}handleMainMessage(t){t.from;const e=t.message;if(e&&e.startsWith("bestmove")){this.whiteMove=!this.whiteMove;const t=this.stockfishParser.getAllData();var r=this.fillRestOfDataForAnalysisOrchestrator(t);this.stockfishParser.clearData(),this.isLiveBoardEvaluation||this.callbackFunction(r),this.isCurrentlyWorking=!1}else{this.stockfishParser.sendMessage(e,this.currentFEN);const t=this.stockfishParser.getAllData();this.isLiveBoardEvaluation&&this.callbackFunction(this.fillRestOfDataForAnalysisOrchestrator(t))}}}},953:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{DZ:()=>p,LJ:()=>s,W3:()=>f,dF:()=>v,hJ:()=>c,k6:()=>h,mY:()=>u,qF:()=>d,wV:()=>P});var a=r(616),o=r(887),i=t([a]);function s(t){return 50+50*(2/(1+Math.exp(-.00368208*t))-1)}function p(t){var e=[];for(const r of t)e.push(r.CPreal);return e}function c(t,e,r){if(r){if(t<=e)return 100;{const r=t-e,n=103.1668100711649*Math.exp(-.04354415386753951*r)-3.166924740191411;return Math.max(Math.min(n+1,100),0),Math.max(Math.min(n+1,100),0)}}if(t>=e)return 100;{const r=e-t,n=103.1668100711649*Math.exp(-.04354415386753951*r)-3.166924740191411;return Math.max(Math.min(n+1,100),0),Math.max(Math.min(n+1,100),0)}}function l(t){for(let e=0;e<2;e++)if(t[e])if("mate"==t[e].cpOrMate)if(1==t[e].isCheckmated)t[e].CPreal=2e3*-t[e].CP;else{const r=t[e].CP>0?1:-1;t[e].CPreal=2e3*r}else t[e].CPreal=t[e].CP}function h(t){l(t);const e=t[0].CP;var r={};if("mate"==t[0].cpOrMate)if(1==t[0].isCheckmated)r.CP="M0",r.evaluation=49*-e;else{const t=e>0?1:-1;r.CP="M"+e.toString(),r.evaluation=49*t}else{var n=50*(2/(1+Math.exp(-.004*e))-1);r.evaluation=n,r.CP=e}return r.CPreal=t[0].CPreal,r}function P(t,e){const r=(0,o.qQ)();r.load(e);var n=[];for(const e of t){const t=r.move({from:e.substring(0,2),to:e.substring(2,4),promotion:"q"});t?n.push(t.san):n.push(e)}return n}function d(t){const e=(0,o.qQ)();return e.load(t),!!e.in_checkmate()}a=(i.then?(await i)():i)[0];const f={draggable:!0,position:"start",onDragStart:g,onDrop:b};function u(t,e,r){return Math.min(Math.max(t,e),r)}function v(t){return t[0].charCodeAt(0)-"a".charCodeAt(0)}function g(t){var e=null;e=a.tQ.getInAlternative?a.tQ.getAlternativeChessObject():a.tQ.getChessObject();const r=a.sV.getChessboard();if(e.game_over())return!1;if("w"===e.turn()&&(n=t.piece,!/^w/.test(n)))return!1;var n;if("b"===e.turn()&&!m(t.piece))return!1;e.moves({square:t.square,verbose:!0}).forEach((t=>{r.addCircle(t.to)}))}function m(t){return/^b/.test(t)}function b(t){if(!("wP"==t.piece&&"8"==t.target[1]||"bP"==t.piece&&"1"==t.target[1]))return y(t.source,t.target,"q");{const e=a.tQ.getChessObject();e.fen();const r=e.move({from:t.source,to:t.target,promotion:"q"});if(e.undo(),!r)return"snapback";{const e=t.piece[0];a.sV.createPromotionPopup(y,t.source,t.target,e)}}}function y(t,e,r){a.sV.getChessboard(),a.tQ.getChessObject();return a.tQ.makePossibleAlternativeMove(t+e,r)}n()}catch(R){n(R)}}))},117:(t,e,r)=>{var n;r.d(e,{i:()=>n}),function(t){t.isTwoNumberArray=function(t){return!!Array.isArray(t)&&(2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])}}(n||(n={}))}},o={};function i(t){var e=o[t];if(void 0!==e)return e.exports;var r=o[t]={exports:{}};return a[t](r,r.exports,i),r.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i.a=(a,o,i)=>{var s;i&&((s=[]).d=-1);var p,c,l,h=new Set,P=a.exports,d=new Promise(((t,e)=>{l=e,c=t}));d[e]=P,d[t]=t=>(s&&t(s),h.forEach(t),d.catch((t=>{}))),a.exports=d,o((a=>{var o;p=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var o=[];o.d=0,a.then((t=>{i[e]=t,n(o)}),(t=>{i[r]=t,n(o)}));var i={};return i[t]=t=>t(o),i}}var s={};return s[t]=t=>{},s[e]=a,s})))(a);var i=()=>p.map((t=>{if(t[r])throw t[r];return t[e]})),c=new Promise((e=>{(o=()=>e(i)).r=0;var r=t=>t!==s&&!h.has(t)&&(h.add(t),t&&!t.d&&(o.r++,t.push(o)));p.map((e=>e[t](r)))}));return o.r?c:i()}),(t=>(t?l(d[r]=t):c(P),n(s)))),s&&s.d<0&&(s.d=0)},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);i(616)})();